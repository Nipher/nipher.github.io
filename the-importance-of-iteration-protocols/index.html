<!DOCTYPE html><html><head><meta charSet="utf-8" class="next-head next-head"/><title class="next-head">The Importance of Iteration Protocols</title><meta name="description" content="Let&#x27;s talk about the importance of iteration protocols, and how valuable they&#x27;re to the javascript language" class="next-head"/><meta name="viewport" content="initial-scale=1.0, width=device-width" class="next-head"/><meta name="twitter:card" content="summary_large_image" class="next-head"/><meta name="twitter:site" content="@nipher_jonas" class="next-head"/><meta name="twitter:title" content="The Importance of Iteration Protocols" class="next-head"/><meta name="twitter:description" content="Let&#x27;s talk about the importance of iteration protocols, and how valuable they&#x27;re to the javascript language" class="next-head"/><meta property="twitter:image:src" content="https://nipher.io/static/site.png" class="next-head"/><meta property="fb:admins" content="100001388969005" class="next-head"/><meta property="og:url" content="https://nipher.io/the-importance-of-iteration-protocols" class="next-head"/><meta property="og:title" content="The Importance of Iteration Protocols" class="next-head"/><meta property="og:image" content="https://nipher.io/static/site.png" class="next-head"/><meta property="og:description" content="Let&#x27;s talk about the importance of iteration protocols, and how valuable they&#x27;re to the javascript language" class="next-head"/><meta property="og:site_name" content="Nipher" class="next-head"/><meta name="google-site-verification" content="d9Yf-wvazE53l5r9utc7O68jw0ynDML0gaw38oBu6RI" class="next-head"/><meta itemProp="name" content="The Importance of Iteration Protocols" class="next-head"/><meta itemProp="description" content="Let&#x27;s talk about the importance of iteration protocols, and how valuable they&#x27;re to the javascript language" class="next-head"/><meta itemProp="image" content="https://nipher.io/static/site.png" class="next-head"/><link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon" class="next-head"/><link rel="apple-touch-icon" sizes="57x57" href="/static/apple-touch-icon-57x57.png" class="next-head"/><link rel="apple-touch-icon" sizes="60x60" href="/static/apple-touch-icon-60x60.png" class="next-head"/><link rel="apple-touch-icon" sizes="72x72" href="/static/apple-touch-icon-72x72.png" class="next-head"/><link rel="apple-touch-icon" sizes="76x76" href="/static/apple-touch-icon-76x76.png" class="next-head"/><link rel="apple-touch-icon" sizes="114x114" href="/static/apple-touch-icon-114x114.png" class="next-head"/><link rel="apple-touch-icon" sizes="120x120" href="/static/apple-touch-icon-120x120.png" class="next-head"/><link rel="apple-touch-icon" sizes="144x144" href="/static/apple-touch-icon-144x144.png" class="next-head"/><link rel="apple-touch-icon" sizes="152x152" href="/static/apple-touch-icon-152x152.png" class="next-head"/><link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon-180x180.png" class="next-head"/><link rel="icon" type="image/png" href="/static/favicon-16x16.png" sizes="16x16" class="next-head"/><link rel="icon" type="image/png" href="/static/favicon-32x32.png" sizes="32x32" class="next-head"/><link rel="icon" type="image/png" href="/static/favicon-96x96.png" sizes="96x96" class="next-head"/><link rel="icon" type="image/png" href="/static/android-chrome-192x192.png" sizes="192x192" class="next-head"/><meta name="msapplication-square70x70logo" content="/static/smalltile.png" class="next-head"/><meta name="msapplication-square150x150logo" content="/static/mediumtile.png" class="next-head"/><meta name="msapplication-square310x310logo" content="/static/largetile.png" class="next-head"/><link rel="preload" href="/_next/670cf37a-1ace-4b08-8ca9-c776f42446c5/page/post.js" as="script"/><link rel="preload" href="/_next/670cf37a-1ace-4b08-8ca9-c776f42446c5/page/_app.js" as="script"/><link rel="preload" href="/_next/670cf37a-1ace-4b08-8ca9-c776f42446c5/page/_error.js" as="script"/><link rel="preload" href="/_next/webpack/chunks/components_social_share_0a49c1be05a44c2c22400be9bd51a7a9-73a5c323e36c6cca27c9.js" as="script"/><link rel="preload" href="/_next/static/commons/main-3050c6e24db11508e52a.js" as="script"/><style id="__jsx-1204780744">.logo{position:relative;height:50px;width:50px;left:0;top:0;opacity:1;cursor:pointer;}</style><style id="__jsx-1462158505">.logo-piece.polygon-1 {
      clip-path: polygon(0% 0%, 33.3% 33.3%, 33.3% 0%);
      -webkit-clip-path: polygon(0% 0%, 33.3% 33.3%, 33.3% 0%);
      background: #333;
    }
.logo-piece.polygon-2 {
      clip-path: polygon(0% 0%, 0% 33.3%, 33.3% 33.3%);
      -webkit-clip-path: polygon(0% 0%, 0% 33.3%, 33.3% 33.3%);
      background: #333;
    }
.logo-piece.polygon-3 {
      clip-path: polygon(0% 33.3%, 33.3% 33.3%, 33.3% 66.6%);
      -webkit-clip-path: polygon(0% 33.3%, 33.3% 33.3%, 33.3% 66.6%);
      background: #333;
    }
.logo-piece.polygon-4 {
      clip-path: polygon(33.3% 0%, 66.6% 33.3%, 33.3% 33.3%);
      -webkit-clip-path: polygon(33.3% 0%, 66.6% 33.3%, 33.3% 33.3%);
      background: #333;
    }
.logo-piece.polygon-5 {
      clip-path: polygon(33.3% 33.3%, 66.6% 66.6%, 33.3% 66.6%);
      -webkit-clip-path: polygon(33.3% 33.3%, 66.6% 66.6%, 33.3% 66.6%);
      background: #333;
    }
.logo-piece.polygon-6 {
      clip-path: polygon(33.3% 33.3%, 66.6% 66.6%, 66.6% 33.3%);
      -webkit-clip-path: polygon(33.3% 33.3%, 66.6% 66.6%, 66.6% 33.3%);
      background: #333;
    }
.logo-piece.polygon-7 {
      clip-path: polygon(33.3% 66.6%, 66.6% 66.6%, 66.6% 100%);
      -webkit-clip-path: polygon(33.3% 66.6%, 66.6% 66.6%, 66.6% 100%);
      background: #333;
    }
.logo-piece.polygon-8 {
      clip-path: polygon(66.6% 33.3%, 66.6% 66.6%, 100% 66.6%);
      -webkit-clip-path: polygon(66.6% 33.3%, 66.6% 66.6%, 100% 66.6%);
      background: #333;
    }
.logo-piece.polygon-9 {
      clip-path: polygon(66.6% 66.6%, 66.6% 100%, 100% 100%);
      -webkit-clip-path: polygon(66.6% 66.6%, 66.6% 100%, 100% 100%);
      background: #333;
    }
.logo-piece.polygon-10 {
      clip-path: polygon(66.6% 66.6%, 100% 66.6%, 100% 100%);
      -webkit-clip-path: polygon(66.6% 66.6%, 100% 66.6%, 100% 100%);
      background: #333;
    }
.logo-piece.polygon-11 {
      clip-path: polygon(66.6% 0%, 100% 0%, 100% 33.3%);
      -webkit-clip-path: polygon(66.6% 0%, 100% 0%, 100% 33.3%);
      background: #333;
    }
.logo-piece.polygon-12 {
      clip-path: polygon(0% 66.6%, 33.3% 100%, 0% 100%);
      -webkit-clip-path: polygon(0% 66.6%, 33.3% 100%, 0% 100%);
      background: #333;
    }
 .photography-piece.polygon-1 {
      clip-path: polygon(30% 0%, 45% 56%, 63% 0%);
      -webkit-clip-path: polygon(30% 0%, 45% 56%, 63% 0%);
      background: #333;
    }
.photography-piece.polygon-2 {
      clip-path: polygon(0% 0%, 44% 56%, 29% 0%);
      -webkit-clip-path: polygon(0% 0%, 44% 56%, 29% 0%);
      background: #333;
    }
.photography-piece.polygon-3 {
      clip-path: polygon(64% 0%, 47% 52%, 99% 0%);
      -webkit-clip-path: polygon(64% 0%, 47% 52%, 99% 0%);
      background: #333;
    }
.photography-piece.polygon-4 {
      clip-path: polygon(47% 54%, 100% 32%, 100% 0%);
      -webkit-clip-path: polygon(47% 54%, 100% 32%, 100% 0%);
      background: #333;
    }
.photography-piece.polygon-5 {
      clip-path: polygon(100% 34%, 50% 54%, 100% 60%);
      -webkit-clip-path: polygon(100% 34%, 50% 54%, 100% 60%);
      background: #333;
    }
.photography-piece.polygon-6 {
      clip-path: polygon(100% 62%, 52% 55%, 100% 99%);
      -webkit-clip-path: polygon(100% 62%, 52% 55%, 100% 99%);
      background: #333;
    }
.photography-piece.polygon-7 {
      clip-path: polygon(99% 100%, 51% 55%, 80% 100%);
      -webkit-clip-path: polygon(99% 100%, 51% 55%, 80% 100%);
      background: #333;
    }
.photography-piece.polygon-8 {
      clip-path: polygon(79% 100%, 52% 58%, 39% 100%);
      -webkit-clip-path: polygon(79% 100%, 52% 58%, 39% 100%);
      background: #333;
    }
.photography-piece.polygon-9 {
      clip-path: polygon(0% 100%, 50% 60%, 38% 100%);
      -webkit-clip-path: polygon(0% 100%, 50% 60%, 38% 100%);
      background: #333;
    }
.photography-piece.polygon-10 {
      clip-path: polygon(48% 60.5%, 0% 63%, 0% 99%);
      -webkit-clip-path: polygon(48% 60.5%, 0% 63%, 0% 99%);
      background: #333;
    }
.photography-piece.polygon-11 {
      clip-path: polygon(0% 62%, 45% 60%, 0% 35%);
      -webkit-clip-path: polygon(0% 62%, 45% 60%, 0% 35%);
      background: #333;
    }
.photography-piece.polygon-12 {
      clip-path: polygon(0% 34%, 45% 59%, 0% 2%);
      -webkit-clip-path: polygon(0% 34%, 45% 59%, 0% 2%);
      background: #333;
    }
 .experiment-piece.polygon-1 {
      clip-path: polygon(20% 20%, 50% 95%, 80% 20%);
      -webkit-clip-path: polygon(20% 20%, 50% 95%, 80% 20%);
      background: #333;
    }
.experiment-piece.polygon-2 {
      clip-path: polygon(20% 20%, 50% 95%, 80% 20%);
      -webkit-clip-path: polygon(20% 20%, 50% 95%, 80% 20%);
      background: #333;
    }
.experiment-piece.polygon-3 {
      clip-path: polygon(0% 62%, 50% 20%, 100% 62%);
      -webkit-clip-path: polygon(0% 62%, 50% 20%, 100% 62%);
      background: #333;
    }
.experiment-piece.polygon-4 {
      clip-path: polygon(80% 20%, 88% 0%, 50% 20%);
      -webkit-clip-path: polygon(80% 20%, 88% 0%, 50% 20%);
      background: #333;
    }
.experiment-piece.polygon-5 {
      clip-path: polygon(20% 20%, 12% 0%, 50% 20%);
      -webkit-clip-path: polygon(20% 20%, 12% 0%, 50% 20%);
      background: #333;
    }
.experiment-piece.polygon-6 {
      clip-path: polygon(29% 44%, 45% 47%, 35% 46.5%);
      -webkit-clip-path: polygon(29% 44%, 45% 47%, 35% 46.5%);
      background: #fff;
    }
.experiment-piece.polygon-7 {
      clip-path: polygon(71% 44%, 55% 47%, 65% 46.5%);
      -webkit-clip-path: polygon(71% 44%, 55% 47%, 65% 46.5%);
      background: #fff;
    }
.experiment-piece.polygon-8 {
      clip-path: polygon(48% 66%, 50% 67%, 52% 66%);
      -webkit-clip-path: polygon(48% 66%, 50% 67%, 52% 66%);
      background: #fff;
    }
.experiment-piece.polygon-9 {
      clip-path: polygon(40% 55%, 44.2% 63%, 46% 65%);
      -webkit-clip-path: polygon(40% 55%, 44.2% 63%, 46% 65%);
      background: #fff;
    }
.experiment-piece.polygon-10 {
      clip-path: polygon(43% 55%, 45.8% 63%, 46% 65%);
      -webkit-clip-path: polygon(43% 55%, 45.8% 63%, 46% 65%);
      background: #fff;
    }
.experiment-piece.polygon-11 {
      clip-path: polygon(60% 55%, 55.8% 63%, 54% 65%);
      -webkit-clip-path: polygon(60% 55%, 55.8% 63%, 54% 65%);
      background: #fff;
    }
.experiment-piece.polygon-12 {
      clip-path: polygon(57% 55%, 54.1% 63%, 54% 65%);
      -webkit-clip-path: polygon(57% 55%, 54.1% 63%, 54% 65%);
      background: #fff;
    }
 .blog-piece.polygon-1 {
      clip-path: polygon(78.125% 21.875%, 78.125% 40.625%, 59.375% 40.625%);
      -webkit-clip-path: polygon(78.125% 21.875%, 78.125% 40.625%, 59.375% 40.625%);
      background: #333;
    }
.blog-piece.polygon-2 {
      clip-path: polygon(78.125% 21.875%, 59.375% 21.875%, 59.375% 40.625%);
      -webkit-clip-path: polygon(78.125% 21.875%, 59.375% 21.875%, 59.375% 40.625%);
      background: #333;
    }
.blog-piece.polygon-3 {
      clip-path: polygon(78.125% 40.625%, 59.375% 40.625%, 59.375% 59.375%);
      -webkit-clip-path: polygon(78.125% 40.625%, 59.375% 40.625%, 59.375% 59.375%);
      background: #333;
    }
.blog-piece.polygon-4 {
      clip-path: polygon(59.375% 21.875%, 59.375% 40.625%, 40.625% 40.625%);
      -webkit-clip-path: polygon(59.375% 21.875%, 59.375% 40.625%, 40.625% 40.625%);
      background: #333;
    }
.blog-piece.polygon-5 {
      clip-path: polygon(59.375% 40.625%, 59.375% 59.375%, 40.625% 59.375%);
      -webkit-clip-path: polygon(59.375% 40.625%, 59.375% 59.375%, 40.625% 59.375%);
      background: #333;
    }
.blog-piece.polygon-6 {
      clip-path: polygon(59.375% 40.625%, 40.625% 40.625%, 40.625% 59.375%);
      -webkit-clip-path: polygon(59.375% 40.625%, 40.625% 40.625%, 40.625% 59.375%);
      background: #333;
    }
.blog-piece.polygon-7 {
      clip-path: polygon(40.625% 59.375%, 59.375% 59.375%, 40.625% 78.125%);
      -webkit-clip-path: polygon(40.625% 59.375%, 59.375% 59.375%, 40.625% 78.125%);
      background: #333;
    }
.blog-piece.polygon-8 {
      clip-path: polygon(40.625% 59.375%, 40.625% 40.625%, 21.875% 59.375%);
      -webkit-clip-path: polygon(40.625% 59.375%, 40.625% 40.625%, 21.875% 59.375%);
      background: #333;
    }
.blog-piece.polygon-9 {
      clip-path: polygon(40.625% 59.375%, 40.625% 78.125%, 21.875% 78.125%);
      -webkit-clip-path: polygon(40.625% 59.375%, 40.625% 78.125%, 21.875% 78.125%);
      background: #333;
    }
.blog-piece.polygon-10 {
      clip-path: polygon(21.875% 59.375%, 40.625% 59.375%, 21.875% 78.125%);
      -webkit-clip-path: polygon(21.875% 59.375%, 40.625% 59.375%, 21.875% 78.125%);
      background: #333;
    }
.blog-piece.polygon-11 {
      clip-path: polygon(0% 50%, 12.5% 37.5%, 12.5% 62.5%);
      -webkit-clip-path: polygon(0% 50%, 12.5% 37.5%, 12.5% 62.5%);
      background: #333;
    }
.blog-piece.polygon-12 {
      clip-path: polygon(100% 50%, 87.5% 62.5%, 87.5% 37.5%);
      -webkit-clip-path: polygon(100% 50%, 87.5% 62.5%, 87.5% 37.5%);
      background: #333;
    }
 
        .polygon-1 {
          transition: -webkit-clip-path 0.39s 0.22s cubic-bezier(.7, .3, 0, 1), clip-path 0.39s 0.22s cubic-bezier(.7, .3, 0, 1), background-color 0.39s 0.22s cubic-bezier(.7, .3, 0, 1), border-radius 0.39s 0.22s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-2 {
          transition: -webkit-clip-path 0.48s 0.24000000000000002s cubic-bezier(.7, .3, 0, 1), clip-path 0.48s 0.24000000000000002s cubic-bezier(.7, .3, 0, 1), background-color 0.48s 0.24000000000000002s cubic-bezier(.7, .3, 0, 1), border-radius 0.48s 0.24000000000000002s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-3 {
          transition: -webkit-clip-path 0.5700000000000001s 0.26s cubic-bezier(.7, .3, 0, 1), clip-path 0.5700000000000001s 0.26s cubic-bezier(.7, .3, 0, 1), background-color 0.5700000000000001s 0.26s cubic-bezier(.7, .3, 0, 1), border-radius 0.5700000000000001s 0.26s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-4 {
          transition: -webkit-clip-path 0.6599999999999999s 0.28s cubic-bezier(.7, .3, 0, 1), clip-path 0.6599999999999999s 0.28s cubic-bezier(.7, .3, 0, 1), background-color 0.6599999999999999s 0.28s cubic-bezier(.7, .3, 0, 1), border-radius 0.6599999999999999s 0.28s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-5 {
          transition: -webkit-clip-path 0.75s 0.30000000000000004s cubic-bezier(.7, .3, 0, 1), clip-path 0.75s 0.30000000000000004s cubic-bezier(.7, .3, 0, 1), background-color 0.75s 0.30000000000000004s cubic-bezier(.7, .3, 0, 1), border-radius 0.75s 0.30000000000000004s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-6 {
          transition: -webkit-clip-path 0.8400000000000001s 0.32s cubic-bezier(.7, .3, 0, 1), clip-path 0.8400000000000001s 0.32s cubic-bezier(.7, .3, 0, 1), background-color 0.8400000000000001s 0.32s cubic-bezier(.7, .3, 0, 1), border-radius 0.8400000000000001s 0.32s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-7 {
          transition: -webkit-clip-path 0.9299999999999999s 0.34s cubic-bezier(.7, .3, 0, 1), clip-path 0.9299999999999999s 0.34s cubic-bezier(.7, .3, 0, 1), background-color 0.9299999999999999s 0.34s cubic-bezier(.7, .3, 0, 1), border-radius 0.9299999999999999s 0.34s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-8 {
          transition: -webkit-clip-path 1.02s 0.36s cubic-bezier(.7, .3, 0, 1), clip-path 1.02s 0.36s cubic-bezier(.7, .3, 0, 1), background-color 1.02s 0.36s cubic-bezier(.7, .3, 0, 1), border-radius 1.02s 0.36s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-9 {
          transition: -webkit-clip-path 1.1099999999999999s 0.38s cubic-bezier(.7, .3, 0, 1), clip-path 1.1099999999999999s 0.38s cubic-bezier(.7, .3, 0, 1), background-color 1.1099999999999999s 0.38s cubic-bezier(.7, .3, 0, 1), border-radius 1.1099999999999999s 0.38s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-10 {
          transition: -webkit-clip-path 1.2s 0.4s cubic-bezier(.7, .3, 0, 1), clip-path 1.2s 0.4s cubic-bezier(.7, .3, 0, 1), background-color 1.2s 0.4s cubic-bezier(.7, .3, 0, 1), border-radius 1.2s 0.4s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-11 {
          transition: -webkit-clip-path 1.29s 0.42000000000000004s cubic-bezier(.7, .3, 0, 1), clip-path 1.29s 0.42000000000000004s cubic-bezier(.7, .3, 0, 1), background-color 1.29s 0.42000000000000004s cubic-bezier(.7, .3, 0, 1), border-radius 1.29s 0.42000000000000004s cubic-bezier(.7, .3, 0, 1);
        }

        .polygon-12 {
          transition: -webkit-clip-path 1.3800000000000001s 0.44s cubic-bezier(.7, .3, 0, 1), clip-path 1.3800000000000001s 0.44s cubic-bezier(.7, .3, 0, 1), background-color 1.3800000000000001s 0.44s cubic-bezier(.7, .3, 0, 1), border-radius 1.3800000000000001s 0.44s cubic-bezier(.7, .3, 0, 1);
        }
 .polygon{position:absolute;height:100%;width:100%;opacity:1;background:#333;}
.polygon::before{content:"";width:100%;height:100%;background:rgba(255,255,255,0);top:0;left:0;position:absolute;}</style><style id="__jsx-3957473981">.menu-button.jsx-3957473981{position:relative;height:50px;width:50px;background:transparent;z-index:3;}
.menu-bar-1.jsx-3957473981{position:absolute;top:20px;left:50%;width:20px;height:2px;background:#333;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:-webkit-transform .3s ease-out;-webkit-transition:transform .3s ease-out;transition:transform .3s ease-out;}
.menu-bar-2.jsx-3957473981{position:absolute;top:auto;bottom:20px;left:50%;width:20px;height:2px;background:#333;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:-webkit-transform .3s ease-out;-webkit-transition:transform .3s ease-out;transition:transform .3s ease-out;}
.menu-button.jsx-3957473981 input[type=checkbox].jsx-3957473981{position:relative;height:100%;width:100%;opacity:0;cursor:pointer;z-index:1;}
input[type=checkbox].jsx-3957473981:checked~.menu-bar-1.jsx-3957473981{-webkit-transform:translate(-50%,4px) rotate(135deg);-ms-transform:translate(-50%,4px) rotate(135deg);transform:translate(-50%,4px) rotate(135deg);}
input[type=checkbox].jsx-3957473981:checked~.menu-bar-2.jsx-3957473981{-webkit-transform:translate(-50%,-4px) rotate(45deg);-ms-transform:translate(-50%,-4px) rotate(45deg);transform:translate(-50%,-4px) rotate(45deg);}</style><style id="__jsx-2047668845">.topbar.jsx-2047668845{padding:30px 70px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}
@media (max-width:500px){.topbar.jsx-2047668845{padding:30px 15px;}}</style><style id="__jsx-624138856">.post-container p{font-family:'Open Sans', 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, sans-serif;font-size:20px;font-weight:200;color:#333;line-height:32px;font-weight:300;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container h1{font-family:'Open Sans', 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, sans-serif;font-size:40px;font-weight:600;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container h2{font-family:'Open Sans', 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, sans-serif;font-size:32px;font-weight:600;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container h4{font-family:'Open Sans', 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, sans-serif;margin:0;font-size:22px;font-weight:600;line-height:22px;color:#333;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container strong{font-weight:600;font-family:'Open Sans', 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, sans-serif;}
.post-container time{display:block;font-family:'Open Sans', 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, sans-serif;font-size:15px;font-weight:300;color:#515151;text-transform:uppercase;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container ul{list-style:inside circle !important;color:#666;font-size:18px;font-weight:200;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container ol{color:#666;font-size:18px;font-weight:200;list-style:inside decimal;max-width:50rem;margin-left:auto;margin-right:auto;padding-left:0;}
.post-container ol,.post-container li{margin-bottom:.5rem;}
.post-container blockquote{padding:0 0 0 10px;color:#999;border-left:10px solid #e5e5e5;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container blockquote p{color:#999;padding:0;}
.post-container pre{margin-left:-15px;padding:50px 15px;width:100vw;box-sizing:border-box;}
.post-container pre code{display:block;padding:0;font-size:16px;color:inherit;background-color:transparent;color:#fff;max-width:50rem;margin-left:auto;margin-right:auto;}
.post-container code{color:#fff;background-color:#7f7f7f;padding:2px 3px;font-size:13px;}
.post-container a{font-family:'Open Sans', 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, sans-serif;font-size:20px;font-weight:300;color:#268bd2;}
#disqus_thread{max-width:50rem;margin-left:auto;margin-right:auto;}
.share{text-align:center;border-top:1px solid #e5e5e5;margin-top:55px;}
.share svg{margin:2rem .938rem;width:35px;height:35px;}
@media (min-width:500px){.post-container pre{padding:50px 70px;margin-left:-70px;}.post-container blockquote{-webkit-transform:translateX(10px);-ms-transform:translateX(10px);transform:translateX(10px);}}</style><style id="__jsx-394600245">.fade-in.jsx-394600245{opacity:0;-webkit-animation:2s fadeIn-jsx-394600245 ease forwards;animation:2s fadeIn-jsx-394600245 ease forwards;}
@-webkit-keyframes fadeIn-jsx-394600245{from{opacity:0;}to{opacity:1;}}
@keyframes fadeIn-jsx-394600245{from{opacity:0;}to{opacity:1;}}</style><style id="__jsx-634012247">p{font-size:20px;}
pre{background-color:#060606;font-size:20px;padding:20px;overflow-x:auto;white-space:pre;}
pre code{padding:0;}
code{color:#fff;background-color:#060606;font-size:65%;border-radius:3px;padding:2px 5px;}
.hljs-comment,.hljs-quote{color:#969896;}
.hljs-variable,.hljs-template-variable,.hljs-tag,.hljs-name,.hljs-selector-id,.hljs-selector-class,.hljs-regexp,.hljs-deletion{color:#cc6666;}
.hljs-literal{color:#4aa3df;}
.hljs-builtin-name,.hljs-type,.hljs-meta,.hljs-link{color:#EB9532;}
.hljs-built_in,.hljs-params{color:#cc6666;}
.hljs-attribute{color:#f0c674;}
.hljs-string,.hljs-symbol,.hljs-bullet,.hljs-addition{color:#EB9532;}
.hljs-number,.hljs-title,.hljs-section{color:#47D2E9;}
.hljs-keyword,.hljs-selector-tag{color:#4aa3df;font-weight:bold;}
.hljs{overflow-x:auto;background-color:#060606;color:#fff;}
.hljs-emphasis{font-style:italic;}
.hljs-strong{font-weight:bold;}</style><style id="__jsx-784795864">a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}
ul{list-style-type:none;margin:0;padding:0;}
.hidden{display:none;}
body{height:100%;}
html{height:100%;}
.page-content{padding:0 70px 30px 70px;position:relative;}
@media (max-width:500px){.page-content{padding:0 15px 30px 15px;}}
.polygon{position:absolute;height:100%;width:100%;opacity:1;background:#333;}
.polygon::before{content:"";width:100%;height:100%;background:rgba(255,255,255,0);top:0;left:0;position:absolute;}</style><style id="__jsx-2827779536">html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}
body{margin:0;}
article,aside,footer,header,nav,section{display:block;}
h1{font-size:2em;margin:0.67em 0;}
figcaption,figure,main{display:block;}
figure{margin:1em 40px;}
hr{box-sizing:content-box;height:0;overflow:visible;}
pre{font-family:monospace,monospace;font-size:1em;}
a{background-color:transparent;-webkit-text-decoration-skip:objects;}
abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}
b,strong{font-weight:inherit;}
b,strong{font-weight:bolder;}
code,kbd,samp{font-family:monospace,monospace;font-size:1em;}
dfn{font-style:italic;}
mark{background-color:#ff0;color:#000;}
small{font-size:80%;}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}
sub{bottom:-0.25em;}
sup{top:-0.5em;}
audio,video{display:inline-block;}
audio:not([controls]){display:none;height:0;}
img{border-style:none;}
svg:not(:root){overflow:hidden;}
button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0;}
button,input{overflow:visible;}
button,select{text-transform:none;}
button,html [type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}
button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}
button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}
fieldset{padding:0.35em 0.75em 0.625em;}
legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}
progress{display:inline-block;vertical-align:baseline;}
textarea{overflow:auto;}
[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}
[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}
[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}
[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}
details,menu{display:block;}
summary{display:list-item;}
canvas{display:inline-block;}
template{display:none;}
[hidden]{display:none;}</style></head><body><div id="__next"><div class="page-container"><header class="jsx-2047668845 topbar"><div class="jsx-1462158505 logo root undefined logo"><div class="jsx-1462158505 logo-piece polygon-1 polygon "></div><div class="jsx-1462158505 logo-piece polygon-2 polygon "></div><div class="jsx-1462158505 logo-piece polygon-3 polygon "></div><div class="jsx-1462158505 logo-piece polygon-4 polygon "></div><div class="jsx-1462158505 logo-piece polygon-5 polygon "></div><div class="jsx-1462158505 logo-piece polygon-6 polygon "></div><div class="jsx-1462158505 logo-piece polygon-7 polygon "></div><div class="jsx-1462158505 logo-piece polygon-8 polygon "></div><div class="jsx-1462158505 logo-piece polygon-9 polygon "></div><div class="jsx-1462158505 logo-piece polygon-10 polygon "></div><div class="jsx-1462158505 logo-piece polygon-11 polygon "></div><div class="jsx-1462158505 logo-piece polygon-12 polygon "></div></div><div class="jsx-3957473981 menu-button "><input type="checkbox" class="jsx-3957473981"/><div class="jsx-3957473981 menu-bar-1"></div><div class="jsx-3957473981 menu-bar-2"></div></div></header><div class="page-content "><section><article itemProp="articleBody" class="jsx-394600245 post-container fade-in"><h1 itemProp="name" class="jsx-394600245 post-title">The Importance of Iteration Protocols</h1><p itemProp="description" class="jsx-394600245">Let&#x27;s talk about the importance of iteration protocols, and how valuable they&#x27;re to the javascript language</p><time itemProp="datePublished" dateTime="2017-12-07 00:40:43 +0200" class="jsx-394600245">07 Dec 2017</time><div class="jsx-394600245"><p>Hey everyone, recently I caught myself talking to a great friend of mine (<a href="http://maksimivanov.com/">Maksim Ivanov</a>, he writes some really useful articles) about iteration protocols in javascript, during the discussion we were very happy with the language improvements that these protocols bring and we also noticed even more things about it, because of this discussion, I decided to write this article.</p>
<p>Let's get started then, first, let me list the topics that I want to talk about:</p>
<ul>
<li><a href="#iteration-protocols">Iteration Protocols?</a></li>
<li><a href="#its-true-value">Its true value</a></li>
<li><a href="#for-of">for..of</a></li>
<li><a href="#creating-a-custom-iterator">Creating a custom iterator</a></li>
<li><a href="#built-in-iterables">Built-in iterables</a></li>
<li><a href="#iterating-over-objects">Iterating over objects</a></li>
<li><a href="#other-languages">Other languages</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<p><h2 id='iteration-protocols'>Iteration Protocols?</h2></p>
<p>Ok, if you don't even know what I'm talking about, I'll explain it real quick and show an example.</p>
<p>Among the iteration protocols we have the Iterable and the Iterator.</p>
<p>Let's check them out separately:</p>
<h4>Iterable</h4>
<p>This protocol simply defines a way to specify the iteration behavior of an object.<br>
So for example, we have a string object <code>'Hello World'</code>, the object itself will tell how its iteration should be like.</p>
<p>How's that?</p>
<p>Well, let's see a code snippet and explain its code, I believe it'll be easier to understand.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> message = <span class="hljs-string">'Hello World'</span>

<span class="hljs-built_in">console</span>.log(message[<span class="hljs-built_in">Symbol</span>.iterator])
<span class="hljs-comment">// &gt; ƒ [Symbol.iterator]() { [native code] }</span>

<span class="hljs-built_in">console</span>.log(message[<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; StringIterator {}</span>
</code></pre>
<p>So, wtf?</p>
<p>Let's go through it:</p>
<ul>
<li>A string is created and assigned to the <code>message</code> constant</li>
<li>We use <code>message[Symbol.iterator]</code> to access a function (which will return an iterator)</li>
<li>We call the function, which returns a <code>StringIterator</code> (which implements the Iterator Protocol)</li>
</ul>
<p>That's the iterable protocol, having the <code>[Symbol.iterator]</code> defined, so anyone can call it and get its iterator, which can be used to get the values to be iterated.</p>
<p>As you might have noticed, we didn't need to implement/define it, the string object already has a <code>[Symbol.iterator]</code> defined, it comes from its prototype (<code>String.prototype[Symbol.iterator]</code>), that's not the case for all types of objects, we'll talk more about it on the topic &quot;Built-in iterables&quot;.</p>
<h4>Iterator</h4>
<p>This protocol is basically an interface for getting sequencial values.</p>
<p>If you think about it for a bit, that's what an iteration is about, getting values sequencially from something. And you'll also realize how many different types of objects we usually want to iterate over:<br>
Arrays, Strings, Map, Set, DOM data structures, Streams, Objects...</p>
<p>Now, in case we want to get sequencial values from one of these guys, we could use the iterator protocol to do so.</p>
<p>An iterator needs to implement this interface:</p>
<pre><code class="language-javascript">{
  next() {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">value</span>: &lt;Anything&gt;, done: &lt;Boolean&gt; }
  }
}
</code></pre>
<p>Let's use a string again, so we can see these two protocols working together:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> message = <span class="hljs-string">'Hello'</span>

<span class="hljs-keyword">const</span> messageIterator = message[<span class="hljs-built_in">Symbol</span>.iterator]() <span class="hljs-comment">// &gt; StringIterator {}</span>

<span class="hljs-built_in">console</span>.log(messageIterator.next())
<span class="hljs-comment">// &gt; { value: 'H', done: false }</span>
<span class="hljs-built_in">console</span>.log(messageIterator.next())
<span class="hljs-comment">// &gt; { value: 'e', done: false }</span>
<span class="hljs-built_in">console</span>.log(messageIterator.next())
<span class="hljs-comment">// &gt; { value: 'l', done: false }</span>
<span class="hljs-built_in">console</span>.log(messageIterator.next())
<span class="hljs-comment">// &gt; { value: 'l', done: false }</span>
<span class="hljs-built_in">console</span>.log(messageIterator.next())
<span class="hljs-comment">// &gt; { value: 'o', done: false }</span>
<span class="hljs-built_in">console</span>.log(messageIterator.next())
<span class="hljs-comment">// &gt; { value: undefined, done: true }</span>
</code></pre>
<p>Well, I guess it's starting to make some sense, right?</p>
<p>Let's go through it real quick</p>
<ul>
<li>We define the string and get an instance of its iterator from it</li>
<li>We start calling <code>next()</code> from the iterator instance (the interface that I mentioned)</li>
<li>Each value returned by <code>next()</code> is a letter from the string</li>
<li>It returns letters in a left -&gt; right order from the string</li>
<li>When there are no letters left, we get <code>undefined</code> as a value and <code>true</code> as done (which means there're no more values)</li>
</ul>
<p>If you think about it, it's a very simple interface and yet it brings a lot of value to the javascript language.</p>
<p><h2 id='its-true-value'>Its true value</h2></p>
<p>As I glimpsed before, we have a lot of cases which we would like to iterate over some kind of structure/object.</p>
<p>We didn't really have a well defined interface for doing it, resulting in different ways to iterate over stuff.</p>
<p>A lot of libraries solved this problem for us, <code>lodash</code> for example:</p>
<pre><code class="language-javascript">_.forEach(<span class="hljs-string">'Hello'</span>, value =&gt; <span class="hljs-built_in">console</span>.log(key))
<span class="hljs-comment">// &gt; 'H' </span>
<span class="hljs-comment">// &gt; 'e'</span>
<span class="hljs-comment">// &gt; 'l'</span>
<span class="hljs-comment">// &gt; 'l'</span>
<span class="hljs-comment">// &gt; 'o'</span>

_.forEach([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], value =&gt; <span class="hljs-built_in">console</span>.log(value))
<span class="hljs-comment">// &gt; 1 </span>
<span class="hljs-comment">// &gt; 2</span>
 
_.forEach({ <span class="hljs-string">'a'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">2</span> }, (value, key) =&gt; <span class="hljs-built_in">console</span>.log(key))
<span class="hljs-comment">// &gt; 'a' </span>
<span class="hljs-comment">// &gt; 'b'</span>
</code></pre>
<p>As you can see above, one single function <code>.forEach(...)</code> which works with any kind of object (String, Array, Object).</p>
<p>But it was about time, that the language itself would improve that, so we wouldn't need a library to execute such a simple thing in a programming language.</p>
<p>Don't get me wrong, I love lodash and such, and they're still super useful and relevant today, they themselves can use and benefit from the iteration interfaces, and they do, imagine how simpler it is to implement their <code>_.forEach</code> method now than it was before.</p>
<p>That's the real value, the combination of simplicity, consistency and well defined patterns.</p>
<p><h2 id='for-of'>for..of</h2></p>
<p>So, how can we use these protocols in a generic way?</p>
<p>Now, we have <code>for (let value of &lt;iterable&gt;) { ... }</code>.</p>
<p>As you can see, it's different than the <code>for</code> we're used to.</p>
<p>Let's check some <code>for..of</code> examples:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> message = <span class="hljs-string">'Hello'</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> letter <span class="hljs-keyword">of</span> message) {
  <span class="hljs-built_in">console</span>.log(letter)
}

<span class="hljs-comment">// &gt; H</span>
<span class="hljs-comment">// &gt; e</span>
<span class="hljs-comment">// &gt; l</span>
<span class="hljs-comment">// &gt; l</span>
<span class="hljs-comment">// &gt; o</span>

<span class="hljs-keyword">const</span> list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> list) {
  <span class="hljs-built_in">console</span>.log(i)
}

<span class="hljs-comment">// &gt; 1</span>
<span class="hljs-comment">// &gt; 2</span>
<span class="hljs-comment">// &gt; 3</span>
<span class="hljs-comment">// &gt; 4</span>
<span class="hljs-comment">// &gt; 5</span>

<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'name'</span>, <span class="hljs-string">'jonas'</span>], [<span class="hljs-string">'age'</span>, <span class="hljs-number">23</span>]])

<span class="hljs-built_in">console</span>.log(person)
<span class="hljs-comment">// &gt; Map { name → "Jonas", age → 23 }</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [key, value] <span class="hljs-keyword">of</span> person) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${key}</span>:`</span>, value)
}

<span class="hljs-comment">// &gt; name: Jonas</span>
<span class="hljs-comment">// &gt; age: 23</span>
</code></pre>
<p>How about <code>for..in</code>?</p>
<p>It's still different.</p>
<p>The <code>for..in</code> iteration does not use iteration protocols, it iterates over enumerable properties of objects, unless the property's name is a <code>Symbol</code> or defined via <code>Object.defineProperty</code> setting <code>enumerable</code> to <code>false</code>.</p>
<p>This also means it would also iterate over its prototype properties (if they fit the description above).</p>
<p>You can avoid such thing by adding a conditional <code>if (obj.hasOwnProperty(prop)) { ... }</code> inside your <code>for..in</code> block, so it will execute the code only for properties of the actual instance.</p>
<p>However, you can avoid <code>for..in</code> if you wish, and use iteration protocols with <code>Object</code> instances like you would use <code>for..in</code> (without the necessity of the conditional though), make sure to use one of the static methods when using <code>for..of</code> with <code>Object</code> types, for example: <code>Object.entries</code></p>
<p>I'll show how it looks like on the topic &quot;Iterating over objects&quot;.</p>
<p><h2 id='creating-a-custom-iterator'>Creating a custom iterator</h2></p>
<p>One interesting thing to point out, is that these protocols are not stricted to be implemented only in the javascript engines, it's also possible to create a custom one.</p>
<p>Let's check an example?</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rangeOf</span>(<span class="hljs-params">n</span>) </span>{
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>
  <span class="hljs-keyword">const</span> range = {}

  range[<span class="hljs-built_in">Symbol</span>.iterator] = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
    next() {
      <span class="hljs-keyword">let</span> [value, done] = (i &lt;= n ? [i++, <span class="hljs-literal">false</span>] : [<span class="hljs-literal">undefined</span>, <span class="hljs-literal">true</span>])
      <span class="hljs-keyword">return</span> { value, done }
    }
  })

  <span class="hljs-keyword">return</span> range
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> rangeOf(<span class="hljs-number">5</span>)) {
  <span class="hljs-built_in">console</span>.log(i)
}

<span class="hljs-comment">// &gt; 1</span>
<span class="hljs-comment">// &gt; 2</span>
<span class="hljs-comment">// &gt; 3</span>
<span class="hljs-comment">// &gt; 4</span>
<span class="hljs-comment">// &gt; 5</span>
</code></pre>
<p>Ok, once more, let's go through the code:</p>
<ul>
<li>A function called <code>rangeOf</code> is defined, it should receive a integer as a parameter</li>
<li>Inside it, we define a variable <code>ì</code> and a <code>range</code> empty object</li>
<li>Now we assign a function to the <code>range[Symbol.iterator]</code></li>
<li>The function which we assign to <code>range</code> returns an object, which follows the iterator protocol</li>
<li>Its <code>next</code> method checks if our <code>i</code> variable is yet bigger than our <code>n</code> (dynamic integer parameter) or not</li>
<li>If not, we define <code>i</code> as value and add plus one to it, and of course done is <code>false</code></li>
<li>If yes, we pass value as <code>undefined</code> and done as <code>true</code></li>
<li>In the end of <code>rangeOf</code> we return our iterable <code>range</code> object</li>
<li>Now, we're using <code>for..of</code> to iterate a brand new created iterable <code>range</code> object, using the value <code>5</code></li>
<li>We log to the console each value during the iteration</li>
</ul>
<p>You see, we created a brand new code following the iteration protocols and using <code>for..of</code> with it and it works!</p>
<p><h2 id='built-in-iterables'>Built-in iterables</h2></p>
<p>So, Built-in iterables, what do I mean with &quot;Built-in&quot; here?</p>
<p>If we take a look at the language specification (<a href="https://github.com/tc39/ecma262">Ecma262</a>), we'll find a couple of clauses which mention the implementation of the <code>[Symbol.iterator]</code> to some &quot;language entities&quot;, check it out:</p>
<ul>
<li><a href="https://tc39.github.io/ecma262/#sec-map.prototype-@@iterator">Map.prototype[Symbol.iterator]</a></li>
<li><a href="https://tc39.github.io/ecma262/#sec-set.prototype-@@iterator">Set.prototype[Symbol.iterator]</a></li>
<li><a href="https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator">Array.prototype[Symbol.iterator]</a></li>
<li><a href="https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator">String.prototype[Symbol.iterator]</a></li>
<li><a href="https://tc39.github.io/ecma262/#sec-%iteratorprototype%-@@iterator">%IteratorPrototype%[Symbol.iterator]</a></li>
<li><a href="https://tc39.github.io/ecma262/#sec-%typedarray%.prototype-@@iterator">%TypedArray%.prototype[Symbol.iterator]</a></li>
</ul>
<p>This is what I mean with Built-in iterables, the specification is created and the javascript engines implement it.</p>
<p>If you're as curious as I am about such things, I also recommend you to go take a look at the <a href="https://github.com/tc39/test262">Test262</a> repository.</p>
<p>So, now that we've seen this, let's look at some code?</p>
<pre><code class="language-javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()[<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; Map Iterator {  }</span>

<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()[<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; Set Iterator {  }</span>

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>[<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; String Iterator {  }</span>

<span class="hljs-built_in">console</span>.log([][<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; Array Iterator {  }</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Int8Array</span>()[<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; Array Iterator {  }</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Int16Array</span>()[<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; Array Iterator {  }</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Int32Array</span>()[<span class="hljs-built_in">Symbol</span>.iterator]())
<span class="hljs-comment">// &gt; Array Iterator {  }</span>
</code></pre>
<p>As you can see, all of these objects are iterables and implement the protocols that we've been discussing so far, you don't need to define them, they're already implemented by the engines which are up to date with the specification.</p>
<p>But... how about <code>Object</code> instances? As I mentioned earlier, if we want ot use <code>for..of</code> with it, we need to use one of its static methods.</p>
<p>Plain objects are not iterables, if we look at the <code>Object.prototype[Symbol.iterator]</code> we see that it's not defined.</p>
<p><h2 id='iterating-over-objects'>Iterating over objects</h2></p>
<p>So, let's say we want to iterate over objects using <code>for..of</code>, how can we do it?</p>
<p>Let's check some of the <code>Object</code> static methods in action:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> person = {<span class="hljs-attr">name</span>: <span class="hljs-string">'Jonas'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [prop, value] <span class="hljs-keyword">of</span> <span class="hljs-built_in">Object</span>.entries(person)) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${prop}</span>:`</span>, value)
}

<span class="hljs-comment">// &gt; name: Jonas</span>
<span class="hljs-comment">// &gt; age: 23</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> <span class="hljs-built_in">Object</span>.values(person)) {
  <span class="hljs-built_in">console</span>.log(value)
}

<span class="hljs-comment">// &gt; 'Jonas'</span>
<span class="hljs-comment">// &gt; 23</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> <span class="hljs-built_in">Object</span>.keys(person)) {
  <span class="hljs-built_in">console</span>.log(key)
}

<span class="hljs-comment">// &gt; name</span>
<span class="hljs-comment">// &gt; age</span>
</code></pre>
<p>As you can see, we have the <code>entries</code>, <code>values</code> and <code>keys</code> static methods, which we call directly from the <code>Object</code> reference, and with that, we can iterate over an object the way it's more appropiate for us, depending on the situation.</p>
<p><h2 id='other-languages'>Other Languages</h2></p>
<p>I wanted to compare for curiosity how these interfaces/protocols work on other programming languages, so I decided to add this topic to the blog post, in case you're curious like me and wish to compare the specifications.</p>
<h4>Python</h4>
<p>Let's check a slice of text from the <a href="https://docs.python.org/3/glossary.html#term-iterable">language specification</a> itself for these protocols.</p>
<p><strong>Iterable</strong></p>
<blockquote>
<p>An object capable of returning its members one at a time. Examples of iterables include all sequence types (such as list, str, and tuple) and some non-sequence types like dict, file objects, and objects of any classes you define with an <strong>iter</strong>() method or with a <strong>getitem</strong>() method that implements Sequence semantics.</p>
</blockquote>
<p><strong>Iterator:</strong></p>
<blockquote>
<p>An object representing a stream of data. Repeated calls to the iterator’s <strong>next</strong>() method (or passing it to the built-in function next()) return successive items in the stream. When no more data are available a StopIteration exception is raised instead.</p>
</blockquote>
<p>Sounds familiar? :)</p>
<p>Let's recreate the same <code>rangeOf</code> example with python?</p>
<pre><code class="language-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RangeOf</span>:</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, n)</span>:</span>
        self.n = n

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__iter__</span><span class="hljs-params">(self)</span>:</span>
        self.i = <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> self

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__next__</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">if</span> self.i &lt;= self.n:
            result = self.i
            self.i += <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">else</span>:
          <span class="hljs-keyword">raise</span> StopIteration

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> RangeOf(<span class="hljs-number">5</span>):
    print(i)

<span class="hljs-comment"># &gt; 1</span>
<span class="hljs-comment"># &gt; 2</span>
<span class="hljs-comment"># &gt; 3</span>
<span class="hljs-comment"># &gt; 4</span>
<span class="hljs-comment"># &gt; 5</span>
</code></pre>
<p>For the record, python has an immutable sequence type called <code>range</code> already, I won't go into it here though.</p>
<h4>Elixir</h4>
<p>In Elixir, we've the Enumerable protocol, let's take a look and see if it's similar.</p>
<p>When you invoke a function from the <code>Enum</code> module (usually used to iterate over stuff) the first argument is usually a collection that must implement the enumerable protocol.</p>
<p>The enumerable protocol is basically having a reduce method defined:</p>
<pre><code class="language-elixir"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>(<span class="hljs-number">_</span>,       {<span class="hljs-symbol">:halt</span>, acc}, _fun),   <span class="hljs-symbol">do:</span> {<span class="hljs-symbol">:halted</span>, acc}
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>(list,    {<span class="hljs-symbol">:suspend</span>, acc}, fun), <span class="hljs-symbol">do:</span> {<span class="hljs-symbol">:suspended</span>, acc, &amp;reduce(list, &amp;<span class="hljs-number">1</span>, fun)}
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>([],      {<span class="hljs-symbol">:cont</span>, acc}, _fun),   <span class="hljs-symbol">do:</span> {<span class="hljs-symbol">:done</span>, acc}
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>([h | t], {<span class="hljs-symbol">:cont</span>, acc}, fun),    <span class="hljs-symbol">do:</span> reduce(t, fun.(h, acc), fun)
</code></pre>
<p>(it uses pattern matching and recursion)</p>
<p>And we have this guy which is returned:</p>
<p><strong>acc()</strong></p>
<blockquote>
<p>acc() :: {:cont, term} | {:halt, term} | {:suspend, term}
The accumulator value for each step.</p>
</blockquote>
<p>It must be a tagged tuple with the accumulator value (<code>term</code>) and with one of the following “tags”:</p>
<p><code>:cont</code> - the enumeration should continue<br>
<code>:halt</code> - the enumeration should halt immediately<br>
<code>:suspend</code> - the enumeration should be suspended immediately</p>
<p>So, we kind of see a very similar thing to the <code>done</code> we've seen before.</p>
<p>Let's create something using it?</p>
<p>Let's say we've a <code>Developer</code> and this developer has a <code>name</code> and a <code>languages</code> collection.<br>
I want to iterate over it using <code>Enum.reduce</code> which will use the Enumerable protocol, and I want to get a language on each iteration step.</p>
<pre><code class="language-elixir"><span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">Developer</span></span> <span class="hljs-keyword">do</span>
  defstruct <span class="hljs-symbol">name:</span> <span class="hljs-string">''</span>, <span class="hljs-symbol">languages:</span> []

  <span class="hljs-class"><span class="hljs-keyword">defimpl</span> <span class="hljs-title">Enumerable</span></span> <span class="hljs-keyword">do</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>(<span class="hljs-number">_</span>, {<span class="hljs-symbol">:halt</span>, acc}, _fun), <span class="hljs-symbol">do:</span> {<span class="hljs-symbol">:halted</span>, acc}

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>(%Developer{<span class="hljs-symbol">languages:</span> languages}, {<span class="hljs-symbol">:suspend</span>, acc}, fun) <span class="hljs-keyword">do</span>
      {<span class="hljs-symbol">:suspended</span>, acc, &amp;reduce(%Developer{<span class="hljs-symbol">languages:</span> languages}, &amp;<span class="hljs-number">1</span>, fun)}
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>(%Developer{<span class="hljs-symbol">languages:</span> []}, {<span class="hljs-symbol">:cont</span>, acc}, _fun), <span class="hljs-symbol">do:</span> {<span class="hljs-symbol">:done</span>, acc}

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce</span></span>(%Developer{<span class="hljs-symbol">languages:</span> [head | tail]}, {<span class="hljs-symbol">:cont</span>, acc}, fun) <span class="hljs-keyword">do</span>
      reduce(%Developer{<span class="hljs-symbol">languages:</span> tail}, fun.(head, acc), fun)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">Main</span></span> <span class="hljs-keyword">do</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span> <span class="hljs-keyword">do</span>
    developer = %Developer{<span class="hljs-symbol">name:</span> <span class="hljs-string">'Charlieh'</span>, <span class="hljs-symbol">languages:</span> [<span class="hljs-string">'js'</span>, <span class="hljs-string">'ruby'</span>, <span class="hljs-string">'python'</span>, <span class="hljs-string">'elixir'</span>]}

    Enum.reduce(developer, <span class="hljs-string">"<span class="hljs-subst">#{developer.name}</span> knows"</span>, <span class="hljs-keyword">fn</span>(skill, acc) -&gt; <span class="hljs-string">"<span class="hljs-subst">#{acc}</span> <span class="hljs-subst">#{skill}</span>"</span> <span class="hljs-keyword">end</span>) |&gt; IO.puts
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

Main.run

<span class="hljs-comment"># &gt; Charlieh knows js ruby python elixir</span>
</code></pre>
<p>There you go, we created our own <code>Developer</code> entity and implemented the <code>Enumerable</code> protocol on it.</p>
<p>This example doesn't add much customization to the iteration behavior actually, but it could...</p>
<p>Unfortunately I'm not experienced with Elixir to show you something more interesting than this, but I guess it served the purpose well, which is the demonstration of a protocol being implemented.</p>
<p><h2 id='conclusion'>Conclusion</h2></p>
<p>In this post, I hope you've got the idea and how awesome and important iteration protocols are for a language.</p>
<p>And there are many more things related to this topic that I could've added here, but I don't want this blog post to grow so long.</p>
<p>But I can list a few things which I didn't mention that use these protocols in the javascript language:</p>
<ul>
<li>Promises (<code>Promise.all</code>, etc)</li>
<li>Spread (<code>[...[1, 2, 3, 4], 5, 6, 7]</code>)</li>
<li>Destructuring (<code>[a, b] = [1, 2]</code>, <code>[first, ...rest] = [1, 2, 3, 4, 5]</code>)</li>
<li>Array.from (<code>Array.from(new Map(['name', 'jonas'], ['age', 23]))</code>)</li>
<li>more...</li>
</ul>
<p>And we have a very nice stage 3 proposal regarding async iterators: <a href="https://github.com/tc39/proposal-async-iteration">Asynchronous Iterators for JavaScript</a> which I'm very hyped about.</p>
<p>Well, I think that's it, I hope you learned reading this article as much as I did writing it.</p>
<p>I wish to leave a few useful links in case you want to check them out and go even further:</p>
<ul>
<li><a href="https://tc39.github.io/ecma262/#sec-common-iteration-interfaces">Ecma262 Iteration Interfaces</a></li>
<li><a href="https://github.com/tc39/test262">Test262</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols">MDN Iteration Protocols</a></li>
<li><a href="https://ponyfoo.com/articles/es6-iterators-in-depth">ES6 Iterators in Depth</a> by <a href="https://twitter.com/nzgb">Nicolás Bevacqua</a></li>
<li><a href="http://2ality.com/2015/02/es6-iteration.html">Iterables and iterators in ECMAScript 6</a> by <a href="https://twitter.com/rauschma">Axel Rauschmayer</a></li>
</ul>
<p>If you have any feedback at all, feel free to comment below :)</p>
<p>See ya around!</p>
</div></article><section class="share"><svg xmlns="http://www.w3.org/2000/svg" display="none" version="1.1"><defs><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"></path></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"></path></symbol><symbol id="icon-google-plus" viewBox="0 0 951 1024"><path class="path1" d="M420 454.857q0 20.571 18.286 40.286t44.286 38.857 51.714 42 44 59.429 18.286 81.143q0 51.429-27.429 98.857-41.143 69.714-120.571 102.571t-170.286 32.857q-75.429 0-140.857-23.714t-98-78.571q-21.143-34.286-21.143-74.857 0-46.286 25.429-85.714t67.714-65.714q74.857-46.857 230.857-57.143-18.286-24-27.143-42.286t-8.857-41.714q0-20.571 12-48.571-26.286 2.286-38.857 2.286-84.571 0-142.571-55.143t-58-139.714q0-46.857 20.571-90.857t56.571-74.857q44-37.714 104.286-56t124.286-18.286h238.857l-78.857 50.286h-74.857q42.286 36 64 76t21.714 91.429q0 41.143-14 74t-33.714 53.143-39.714 37.143-34 35.143-14 37.714zM336.571 400q21.714 0 44.571-9.429t37.714-24.857q30.286-32.571 30.286-90.857 0-33.143-9.714-71.429t-27.714-74-48.286-59.143-66.857-23.429q-24 0-47.143 11.143t-37.429 30q-26.857 33.714-26.857 91.429 0 26.286 5.714 55.714t18 58.857 29.714 52.857 42.857 38.286 55.143 14.857zM337.714 898.857q33.143 0 63.714-7.429t56.571-22.286 41.714-41.714 15.714-62.286q0-14.286-4-28t-8.286-24-15.429-23.714-16.857-20-22-19.714-20.857-16.571-23.714-17.143-20.857-14.857q-9.143-1.143-27.429-1.143-30.286 0-60 4t-61.429 14.286-55.429 26.286-39.143 42.571-15.429 60.286q0 40 20 70.571t52.286 47.429 68 25.143 72.857 8.286zM800.571 398.286h121.714v61.714h-121.714v125.143h-60v-125.143h-121.143v-61.714h121.143v-124h60v124z"></path></symbol><symbol id="icon-angle-down" viewBox="0 0 658 1024"><path class="path1" d="M614.286 420.571q0 7.429-5.714 13.143l-266.286 266.286q-5.714 5.714-13.143 5.714t-13.143-5.714l-266.286-266.286q-5.714-5.714-5.714-13.143t5.714-13.143l28.571-28.571q5.714-5.714 13.143-5.714t13.143 5.714l224.571 224.571 224.571-224.571q5.714-5.714 13.143-5.714t13.143 5.714l28.571 28.571q5.714 5.714 5.714 13.143z"></path></symbol></defs></svg><a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Let&#x27;s talk about the importance of iteration protocols, and how valuable they&#x27;re to the javascript language&quot; http://nipher.io/the-importance-of-iteration-protocols via @nipher_jonas&amp;hashtags=js,iterator,iterable,protocols" title="Share on Twitter"><svg class="icon icon-twitter"><use href="#icon-twitter"></use></svg></a><a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://nipher.io/the-importance-of-iteration-protocols" title="Share on Facebook"><svg class="icon icon-facebook"><use href="#icon-facebook"></use></svg></a><a aria-label="Share on Google Plus" href="https://plus.google.com/share?url=http://nipher.io/the-importance-of-iteration-protocols" title="Share on Google+"><svg class="icon icon-google-plus"><use href="#icon-google-plus"></use></svg></a></section><div><div id="disqus_thread"></div></div></section></div><div style="width:100%;height:100%"></div></div></div><div id="__next-error"></div><script>
          __NEXT_DATA__ = {"props":{"pageProps":{"date":"07 Dec 2017","post":"\u003cp\u003eHey everyone, recently I caught myself talking to a great friend of mine (\u003ca href=\"http://maksimivanov.com/\"\u003eMaksim Ivanov\u003c/a\u003e, he writes some really useful articles) about iteration protocols in javascript, during the discussion we were very happy with the language improvements that these protocols bring and we also noticed even more things about it, because of this discussion, I decided to write this article.\u003c/p\u003e\n\u003cp\u003eLet's get started then, first, let me list the topics that I want to talk about:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#iteration-protocols\"\u003eIteration Protocols?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#its-true-value\"\u003eIts true value\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#for-of\"\u003efor..of\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#creating-a-custom-iterator\"\u003eCreating a custom iterator\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#built-in-iterables\"\u003eBuilt-in iterables\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#iterating-over-objects\"\u003eIterating over objects\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#other-languages\"\u003eOther languages\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ch2 id='iteration-protocols'\u003eIteration Protocols?\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eOk, if you don't even know what I'm talking about, I'll explain it real quick and show an example.\u003c/p\u003e\n\u003cp\u003eAmong the iteration protocols we have the Iterable and the Iterator.\u003c/p\u003e\n\u003cp\u003eLet's check them out separately:\u003c/p\u003e\n\u003ch4\u003eIterable\u003c/h4\u003e\n\u003cp\u003eThis protocol simply defines a way to specify the iteration behavior of an object.\u003cbr\u003e\nSo for example, we have a string object \u003ccode\u003e'Hello World'\u003c/code\u003e, the object itself will tell how its iteration should be like.\u003c/p\u003e\n\u003cp\u003eHow's that?\u003c/p\u003e\n\u003cp\u003eWell, let's see a code snippet and explain its code, I believe it'll be easier to understand.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e'Hello World'\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(message[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator])\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; ƒ [Symbol.iterator]() { [native code] }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(message[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; StringIterator {}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo, wtf?\u003c/p\u003e\n\u003cp\u003eLet's go through it:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eA string is created and assigned to the \u003ccode\u003emessage\u003c/code\u003e constant\u003c/li\u003e\n\u003cli\u003eWe use \u003ccode\u003emessage[Symbol.iterator]\u003c/code\u003e to access a function (which will return an iterator)\u003c/li\u003e\n\u003cli\u003eWe call the function, which returns a \u003ccode\u003eStringIterator\u003c/code\u003e (which implements the Iterator Protocol)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThat's the iterable protocol, having the \u003ccode\u003e[Symbol.iterator]\u003c/code\u003e defined, so anyone can call it and get its iterator, which can be used to get the values to be iterated.\u003c/p\u003e\n\u003cp\u003eAs you might have noticed, we didn't need to implement/define it, the string object already has a \u003ccode\u003e[Symbol.iterator]\u003c/code\u003e defined, it comes from its prototype (\u003ccode\u003eString.prototype[Symbol.iterator]\u003c/code\u003e), that's not the case for all types of objects, we'll talk more about it on the topic \u0026quot;Built-in iterables\u0026quot;.\u003c/p\u003e\n\u003ch4\u003eIterator\u003c/h4\u003e\n\u003cp\u003eThis protocol is basically an interface for getting sequencial values.\u003c/p\u003e\n\u003cp\u003eIf you think about it for a bit, that's what an iteration is about, getting values sequencially from something. And you'll also realize how many different types of objects we usually want to iterate over:\u003cbr\u003e\nArrays, Strings, Map, Set, DOM data structures, Streams, Objects...\u003c/p\u003e\n\u003cp\u003eNow, in case we want to get sequencial values from one of these guys, we could use the iterator protocol to do so.\u003c/p\u003e\n\u003cp\u003eAn iterator needs to implement this interface:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e{\n  next() {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u0026lt;Anything\u0026gt;, done: \u0026lt;Boolean\u0026gt; }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLet's use a string again, so we can see these two protocols working together:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e'Hello'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e messageIterator = message[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]() \u003cspan class=\"hljs-comment\"\u003e// \u0026gt; StringIterator {}\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'H', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'e', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'l', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'l', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'o', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: undefined, done: true }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWell, I guess it's starting to make some sense, right?\u003c/p\u003e\n\u003cp\u003eLet's go through it real quick\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWe define the string and get an instance of its iterator from it\u003c/li\u003e\n\u003cli\u003eWe start calling \u003ccode\u003enext()\u003c/code\u003e from the iterator instance (the interface that I mentioned)\u003c/li\u003e\n\u003cli\u003eEach value returned by \u003ccode\u003enext()\u003c/code\u003e is a letter from the string\u003c/li\u003e\n\u003cli\u003eIt returns letters in a left -\u0026gt; right order from the string\u003c/li\u003e\n\u003cli\u003eWhen there are no letters left, we get \u003ccode\u003eundefined\u003c/code\u003e as a value and \u003ccode\u003etrue\u003c/code\u003e as done (which means there're no more values)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you think about it, it's a very simple interface and yet it brings a lot of value to the javascript language.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='its-true-value'\u003eIts true value\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eAs I glimpsed before, we have a lot of cases which we would like to iterate over some kind of structure/object.\u003c/p\u003e\n\u003cp\u003eWe didn't really have a well defined interface for doing it, resulting in different ways to iterate over stuff.\u003c/p\u003e\n\u003cp\u003eA lot of libraries solved this problem for us, \u003ccode\u003elodash\u003c/code\u003e for example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e_.forEach(\u003cspan class=\"hljs-string\"\u003e'Hello'\u003c/span\u003e, value =\u0026gt; \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(key))\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'H' \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'e'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'l'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'l'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'o'\u003c/span\u003e\n\n_.forEach([\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e], value =\u0026gt; \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(value))\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 1 \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 2\u003c/span\u003e\n \n_.forEach({ \u003cspan class=\"hljs-string\"\u003e'a'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'b'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e }, (value, key) =\u0026gt; \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(key))\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'a' \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'b'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see above, one single function \u003ccode\u003e.forEach(...)\u003c/code\u003e which works with any kind of object (String, Array, Object).\u003c/p\u003e\n\u003cp\u003eBut it was about time, that the language itself would improve that, so we wouldn't need a library to execute such a simple thing in a programming language.\u003c/p\u003e\n\u003cp\u003eDon't get me wrong, I love lodash and such, and they're still super useful and relevant today, they themselves can use and benefit from the iteration interfaces, and they do, imagine how simpler it is to implement their \u003ccode\u003e_.forEach\u003c/code\u003e method now than it was before.\u003c/p\u003e\n\u003cp\u003eThat's the real value, the combination of simplicity, consistency and well defined patterns.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='for-of'\u003efor..of\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eSo, how can we use these protocols in a generic way?\u003c/p\u003e\n\u003cp\u003eNow, we have \u003ccode\u003efor (let value of \u0026lt;iterable\u0026gt;) { ... }\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAs you can see, it's different than the \u003ccode\u003efor\u003c/code\u003e we're used to.\u003c/p\u003e\n\u003cp\u003eLet's check some \u003ccode\u003efor..of\u003c/code\u003e examples:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e'Hello'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e letter \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e message) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(letter)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; H\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; e\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; l\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; l\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; o\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e list = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e]\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e list) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(i)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 3\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 4\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 5\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e person = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eMap\u003c/span\u003e([[\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'jonas'\u003c/span\u003e], [\u003cspan class=\"hljs-string\"\u003e'age'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e]])\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(person)\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Map { name → \"Jonas\", age → 23 }\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e [key, value] \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e person) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${key}\u003c/span\u003e:`\u003c/span\u003e, value)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; name: Jonas\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; age: 23\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHow about \u003ccode\u003efor..in\u003c/code\u003e?\u003c/p\u003e\n\u003cp\u003eIt's still different.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003efor..in\u003c/code\u003e iteration does not use iteration protocols, it iterates over enumerable properties of objects, unless the property's name is a \u003ccode\u003eSymbol\u003c/code\u003e or defined via \u003ccode\u003eObject.defineProperty\u003c/code\u003e setting \u003ccode\u003eenumerable\u003c/code\u003e to \u003ccode\u003efalse\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThis also means it would also iterate over its prototype properties (if they fit the description above).\u003c/p\u003e\n\u003cp\u003eYou can avoid such thing by adding a conditional \u003ccode\u003eif (obj.hasOwnProperty(prop)) { ... }\u003c/code\u003e inside your \u003ccode\u003efor..in\u003c/code\u003e block, so it will execute the code only for properties of the actual instance.\u003c/p\u003e\n\u003cp\u003eHowever, you can avoid \u003ccode\u003efor..in\u003c/code\u003e if you wish, and use iteration protocols with \u003ccode\u003eObject\u003c/code\u003e instances like you would use \u003ccode\u003efor..in\u003c/code\u003e (without the necessity of the conditional though), make sure to use one of the static methods when using \u003ccode\u003efor..of\u003c/code\u003e with \u003ccode\u003eObject\u003c/code\u003e types, for example: \u003ccode\u003eObject.entries\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eI'll show how it looks like on the topic \u0026quot;Iterating over objects\u0026quot;.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='creating-a-custom-iterator'\u003eCreating a custom iterator\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eOne interesting thing to point out, is that these protocols are not stricted to be implemented only in the javascript engines, it's also possible to create a custom one.\u003c/p\u003e\n\u003cp\u003eLet's check an example?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erangeOf\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003en\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e range = {}\n\n  range[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator] = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({\n    next() {\n      \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e [value, done] = (i \u0026lt;= n ? [i++, \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e] : [\u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e])\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { value, done }\n    }\n  })\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e range\n}\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e rangeOf(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(i)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 3\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 4\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 5\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOk, once more, let's go through the code:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eA function called \u003ccode\u003erangeOf\u003c/code\u003e is defined, it should receive a integer as a parameter\u003c/li\u003e\n\u003cli\u003eInside it, we define a variable \u003ccode\u003eì\u003c/code\u003e and a \u003ccode\u003erange\u003c/code\u003e empty object\u003c/li\u003e\n\u003cli\u003eNow we assign a function to the \u003ccode\u003erange[Symbol.iterator]\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eThe function which we assign to \u003ccode\u003erange\u003c/code\u003e returns an object, which follows the iterator protocol\u003c/li\u003e\n\u003cli\u003eIts \u003ccode\u003enext\u003c/code\u003e method checks if our \u003ccode\u003ei\u003c/code\u003e variable is yet bigger than our \u003ccode\u003en\u003c/code\u003e (dynamic integer parameter) or not\u003c/li\u003e\n\u003cli\u003eIf not, we define \u003ccode\u003ei\u003c/code\u003e as value and add plus one to it, and of course done is \u003ccode\u003efalse\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eIf yes, we pass value as \u003ccode\u003eundefined\u003c/code\u003e and done as \u003ccode\u003etrue\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eIn the end of \u003ccode\u003erangeOf\u003c/code\u003e we return our iterable \u003ccode\u003erange\u003c/code\u003e object\u003c/li\u003e\n\u003cli\u003eNow, we're using \u003ccode\u003efor..of\u003c/code\u003e to iterate a brand new created iterable \u003ccode\u003erange\u003c/code\u003e object, using the value \u003ccode\u003e5\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eWe log to the console each value during the iteration\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou see, we created a brand new code following the iteration protocols and using \u003ccode\u003efor..of\u003c/code\u003e with it and it works!\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='built-in-iterables'\u003eBuilt-in iterables\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eSo, Built-in iterables, what do I mean with \u0026quot;Built-in\u0026quot; here?\u003c/p\u003e\n\u003cp\u003eIf we take a look at the language specification (\u003ca href=\"https://github.com/tc39/ecma262\"\u003eEcma262\u003c/a\u003e), we'll find a couple of clauses which mention the implementation of the \u003ccode\u003e[Symbol.iterator]\u003c/code\u003e to some \u0026quot;language entities\u0026quot;, check it out:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-map.prototype-@@iterator\"\u003eMap.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-set.prototype-@@iterator\"\u003eSet.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\"\u003eArray.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\"\u003eString.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-%iteratorprototype%-@@iterator\"\u003e%IteratorPrototype%[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-%typedarray%.prototype-@@iterator\"\u003e%TypedArray%.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis is what I mean with Built-in iterables, the specification is created and the javascript engines implement it.\u003c/p\u003e\n\u003cp\u003eIf you're as curious as I am about such things, I also recommend you to go take a look at the \u003ca href=\"https://github.com/tc39/test262\"\u003eTest262\u003c/a\u003e repository.\u003c/p\u003e\n\u003cp\u003eSo, now that we've seen this, let's look at some code?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eMap\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Map Iterator {  }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eSet\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Set Iterator {  }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; String Iterator {  }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log([][\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eInt8Array\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eInt16Array\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eInt32Array\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, all of these objects are iterables and implement the protocols that we've been discussing so far, you don't need to define them, they're already implemented by the engines which are up to date with the specification.\u003c/p\u003e\n\u003cp\u003eBut... how about \u003ccode\u003eObject\u003c/code\u003e instances? As I mentioned earlier, if we want ot use \u003ccode\u003efor..of\u003c/code\u003e with it, we need to use one of its static methods.\u003c/p\u003e\n\u003cp\u003ePlain objects are not iterables, if we look at the \u003ccode\u003eObject.prototype[Symbol.iterator]\u003c/code\u003e we see that it's not defined.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='iterating-over-objects'\u003eIterating over objects\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eSo, let's say we want to iterate over objects using \u003ccode\u003efor..of\u003c/code\u003e, how can we do it?\u003c/p\u003e\n\u003cp\u003eLet's check some of the \u003ccode\u003eObject\u003c/code\u003e static methods in action:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e person = {\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Jonas'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e}\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e [prop, value] \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.entries(person)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${prop}\u003c/span\u003e:`\u003c/span\u003e, value)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; name: Jonas\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; age: 23\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e value \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.values(person)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(value)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'Jonas'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 23\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e key \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.keys(person)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(key)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; name\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; age\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, we have the \u003ccode\u003eentries\u003c/code\u003e, \u003ccode\u003evalues\u003c/code\u003e and \u003ccode\u003ekeys\u003c/code\u003e static methods, which we call directly from the \u003ccode\u003eObject\u003c/code\u003e reference, and with that, we can iterate over an object the way it's more appropiate for us, depending on the situation.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='other-languages'\u003eOther Languages\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eI wanted to compare for curiosity how these interfaces/protocols work on other programming languages, so I decided to add this topic to the blog post, in case you're curious like me and wish to compare the specifications.\u003c/p\u003e\n\u003ch4\u003ePython\u003c/h4\u003e\n\u003cp\u003eLet's check a slice of text from the \u003ca href=\"https://docs.python.org/3/glossary.html#term-iterable\"\u003elanguage specification\u003c/a\u003e itself for these protocols.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eIterable\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAn object capable of returning its members one at a time. Examples of iterables include all sequence types (such as list, str, and tuple) and some non-sequence types like dict, file objects, and objects of any classes you define with an \u003cstrong\u003eiter\u003c/strong\u003e() method or with a \u003cstrong\u003egetitem\u003c/strong\u003e() method that implements Sequence semantics.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eIterator:\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAn object representing a stream of data. Repeated calls to the iterator’s \u003cstrong\u003enext\u003c/strong\u003e() method (or passing it to the built-in function next()) return successive items in the stream. When no more data are available a StopIteration exception is raised instead.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSounds familiar? :)\u003c/p\u003e\n\u003cp\u003eLet's recreate the same \u003ccode\u003erangeOf\u003c/code\u003e example with python?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eRangeOf\u003c/span\u003e:\u003c/span\u003e\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(self, n)\u003c/span\u003e:\u003c/span\u003e\n        self.n = n\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__iter__\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(self)\u003c/span\u003e:\u003c/span\u003e\n        self.i = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__next__\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(self)\u003c/span\u003e:\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e self.i \u0026lt;= self.n:\n            result = self.i\n            self.i += \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n          \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e StopIteration\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e RangeOf(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e):\n    print(i)\n\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 3\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 4\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 5\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor the record, python has an immutable sequence type called \u003ccode\u003erange\u003c/code\u003e already, I won't go into it here though.\u003c/p\u003e\n\u003ch4\u003eElixir\u003c/h4\u003e\n\u003cp\u003eIn Elixir, we've the Enumerable protocol, let's take a look and see if it's similar.\u003c/p\u003e\n\u003cp\u003eWhen you invoke a function from the \u003ccode\u003eEnum\u003c/code\u003e module (usually used to iterate over stuff) the first argument is usually a collection that must implement the enumerable protocol.\u003c/p\u003e\n\u003cp\u003eThe enumerable protocol is basically having a reduce method defined:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-elixir\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e_\u003c/span\u003e,       {\u003cspan class=\"hljs-symbol\"\u003e:halt\u003c/span\u003e, acc}, _fun),   \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:halted\u003c/span\u003e, acc}\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(list,    {\u003cspan class=\"hljs-symbol\"\u003e:suspend\u003c/span\u003e, acc}, fun), \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:suspended\u003c/span\u003e, acc, \u0026amp;reduce(list, \u0026amp;\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, fun)}\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e([],      {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, _fun),   \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:done\u003c/span\u003e, acc}\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e([h | t], {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, fun),    \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e reduce(t, fun.(h, acc), fun)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e(it uses pattern matching and recursion)\u003c/p\u003e\n\u003cp\u003eAnd we have this guy which is returned:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eacc()\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eacc() :: {:cont, term} | {:halt, term} | {:suspend, term}\nThe accumulator value for each step.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIt must be a tagged tuple with the accumulator value (\u003ccode\u003eterm\u003c/code\u003e) and with one of the following “tags”:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e:cont\u003c/code\u003e - the enumeration should continue\u003cbr\u003e\n\u003ccode\u003e:halt\u003c/code\u003e - the enumeration should halt immediately\u003cbr\u003e\n\u003ccode\u003e:suspend\u003c/code\u003e - the enumeration should be suspended immediately\u003c/p\u003e\n\u003cp\u003eSo, we kind of see a very similar thing to the \u003ccode\u003edone\u003c/code\u003e we've seen before.\u003c/p\u003e\n\u003cp\u003eLet's create something using it?\u003c/p\u003e\n\u003cp\u003eLet's say we've a \u003ccode\u003eDeveloper\u003c/code\u003e and this developer has a \u003ccode\u003ename\u003c/code\u003e and a \u003ccode\u003elanguages\u003c/code\u003e collection.\u003cbr\u003e\nI want to iterate over it using \u003ccode\u003eEnum.reduce\u003c/code\u003e which will use the Enumerable protocol, and I want to get a language on each iteration step.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-elixir\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003edefmodule\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eDeveloper\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  defstruct \u003cspan class=\"hljs-symbol\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e []\n\n  \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003edefimpl\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eEnumerable\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e_\u003c/span\u003e, {\u003cspan class=\"hljs-symbol\"\u003e:halt\u003c/span\u003e, acc}, _fun), \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:halted\u003c/span\u003e, acc}\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e languages}, {\u003cspan class=\"hljs-symbol\"\u003e:suspend\u003c/span\u003e, acc}, fun) \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n      {\u003cspan class=\"hljs-symbol\"\u003e:suspended\u003c/span\u003e, acc, \u0026amp;reduce(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e languages}, \u0026amp;\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, fun)}\n    \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e []}, {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, _fun), \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:done\u003c/span\u003e, acc}\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e [head | tail]}, {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, fun) \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n      reduce(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e tail}, fun.(head, acc), fun)\n    \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003edefmodule\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMain\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erun\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    developer = %Developer{\u003cspan class=\"hljs-symbol\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Charlieh'\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e'js'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'ruby'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'python'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'elixir'\u003c/span\u003e]}\n\n    Enum.reduce(developer, \u003cspan class=\"hljs-string\"\u003e\"\u003cspan class=\"hljs-subst\"\u003e#{developer.name}\u003c/span\u003e knows\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efn\u003c/span\u003e(skill, acc) -\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"\u003cspan class=\"hljs-subst\"\u003e#{acc}\u003c/span\u003e \u003cspan class=\"hljs-subst\"\u003e#{skill}\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e) |\u0026gt; IO.puts\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\nMain.run\n\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; Charlieh knows js ruby python elixir\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere you go, we created our own \u003ccode\u003eDeveloper\u003c/code\u003e entity and implemented the \u003ccode\u003eEnumerable\u003c/code\u003e protocol on it.\u003c/p\u003e\n\u003cp\u003eThis example doesn't add much customization to the iteration behavior actually, but it could...\u003c/p\u003e\n\u003cp\u003eUnfortunately I'm not experienced with Elixir to show you something more interesting than this, but I guess it served the purpose well, which is the demonstration of a protocol being implemented.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='conclusion'\u003eConclusion\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eIn this post, I hope you've got the idea and how awesome and important iteration protocols are for a language.\u003c/p\u003e\n\u003cp\u003eAnd there are many more things related to this topic that I could've added here, but I don't want this blog post to grow so long.\u003c/p\u003e\n\u003cp\u003eBut I can list a few things which I didn't mention that use these protocols in the javascript language:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePromises (\u003ccode\u003ePromise.all\u003c/code\u003e, etc)\u003c/li\u003e\n\u003cli\u003eSpread (\u003ccode\u003e[...[1, 2, 3, 4], 5, 6, 7]\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eDestructuring (\u003ccode\u003e[a, b] = [1, 2]\u003c/code\u003e, \u003ccode\u003e[first, ...rest] = [1, 2, 3, 4, 5]\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eArray.from (\u003ccode\u003eArray.from(new Map(['name', 'jonas'], ['age', 23]))\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003emore...\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAnd we have a very nice stage 3 proposal regarding async iterators: \u003ca href=\"https://github.com/tc39/proposal-async-iteration\"\u003eAsynchronous Iterators for JavaScript\u003c/a\u003e which I'm very hyped about.\u003c/p\u003e\n\u003cp\u003eWell, I think that's it, I hope you learned reading this article as much as I did writing it.\u003c/p\u003e\n\u003cp\u003eI wish to leave a few useful links in case you want to check them out and go even further:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-common-iteration-interfaces\"\u003eEcma262 Iteration Interfaces\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/test262\"\u003eTest262\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\"\u003eMDN Iteration Protocols\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://ponyfoo.com/articles/es6-iterators-in-depth\"\u003eES6 Iterators in Depth\u003c/a\u003e by \u003ca href=\"https://twitter.com/nzgb\"\u003eNicolás Bevacqua\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://2ality.com/2015/02/es6-iteration.html\"\u003eIterables and iterators in ECMAScript 6\u003c/a\u003e by \u003ca href=\"https://twitter.com/rauschma\"\u003eAxel Rauschmayer\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you have any feedback at all, feel free to comment below :)\u003c/p\u003e\n\u003cp\u003eSee ya around!\u003c/p\u003e\n","metaData":{"layout":"post","title":"The Importance of Iteration Protocols","slug":"the-importance-of-iteration-protocols","description":"Let's talk about the importance of iteration protocols, and how valuable they're to the javascript language","date":"2017-12-07 00:40:43 +0200","language":"English","excerpt":"What value iteration protocols bring, what they are, how they work and how are they different across programming languages.\n\nOn this blog post, I'll explore iteration protocols and give you lots of examples, so we can understand them easily and explore their usefulness\n","tags":["js","iterator","iterable","protocols"]},"slug":"the-importance-of-iteration-protocols","build":true}},"page":"/post","pathname":"/post","query":{"date":"07 Dec 2017","post":"\u003cp\u003eHey everyone, recently I caught myself talking to a great friend of mine (\u003ca href=\"http://maksimivanov.com/\"\u003eMaksim Ivanov\u003c/a\u003e, he writes some really useful articles) about iteration protocols in javascript, during the discussion we were very happy with the language improvements that these protocols bring and we also noticed even more things about it, because of this discussion, I decided to write this article.\u003c/p\u003e\n\u003cp\u003eLet's get started then, first, let me list the topics that I want to talk about:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#iteration-protocols\"\u003eIteration Protocols?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#its-true-value\"\u003eIts true value\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#for-of\"\u003efor..of\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#creating-a-custom-iterator\"\u003eCreating a custom iterator\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#built-in-iterables\"\u003eBuilt-in iterables\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#iterating-over-objects\"\u003eIterating over objects\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#other-languages\"\u003eOther languages\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ch2 id='iteration-protocols'\u003eIteration Protocols?\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eOk, if you don't even know what I'm talking about, I'll explain it real quick and show an example.\u003c/p\u003e\n\u003cp\u003eAmong the iteration protocols we have the Iterable and the Iterator.\u003c/p\u003e\n\u003cp\u003eLet's check them out separately:\u003c/p\u003e\n\u003ch4\u003eIterable\u003c/h4\u003e\n\u003cp\u003eThis protocol simply defines a way to specify the iteration behavior of an object.\u003cbr\u003e\nSo for example, we have a string object \u003ccode\u003e'Hello World'\u003c/code\u003e, the object itself will tell how its iteration should be like.\u003c/p\u003e\n\u003cp\u003eHow's that?\u003c/p\u003e\n\u003cp\u003eWell, let's see a code snippet and explain its code, I believe it'll be easier to understand.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e'Hello World'\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(message[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator])\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; ƒ [Symbol.iterator]() { [native code] }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(message[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; StringIterator {}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo, wtf?\u003c/p\u003e\n\u003cp\u003eLet's go through it:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eA string is created and assigned to the \u003ccode\u003emessage\u003c/code\u003e constant\u003c/li\u003e\n\u003cli\u003eWe use \u003ccode\u003emessage[Symbol.iterator]\u003c/code\u003e to access a function (which will return an iterator)\u003c/li\u003e\n\u003cli\u003eWe call the function, which returns a \u003ccode\u003eStringIterator\u003c/code\u003e (which implements the Iterator Protocol)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThat's the iterable protocol, having the \u003ccode\u003e[Symbol.iterator]\u003c/code\u003e defined, so anyone can call it and get its iterator, which can be used to get the values to be iterated.\u003c/p\u003e\n\u003cp\u003eAs you might have noticed, we didn't need to implement/define it, the string object already has a \u003ccode\u003e[Symbol.iterator]\u003c/code\u003e defined, it comes from its prototype (\u003ccode\u003eString.prototype[Symbol.iterator]\u003c/code\u003e), that's not the case for all types of objects, we'll talk more about it on the topic \u0026quot;Built-in iterables\u0026quot;.\u003c/p\u003e\n\u003ch4\u003eIterator\u003c/h4\u003e\n\u003cp\u003eThis protocol is basically an interface for getting sequencial values.\u003c/p\u003e\n\u003cp\u003eIf you think about it for a bit, that's what an iteration is about, getting values sequencially from something. And you'll also realize how many different types of objects we usually want to iterate over:\u003cbr\u003e\nArrays, Strings, Map, Set, DOM data structures, Streams, Objects...\u003c/p\u003e\n\u003cp\u003eNow, in case we want to get sequencial values from one of these guys, we could use the iterator protocol to do so.\u003c/p\u003e\n\u003cp\u003eAn iterator needs to implement this interface:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e{\n  next() {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u0026lt;Anything\u0026gt;, done: \u0026lt;Boolean\u0026gt; }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLet's use a string again, so we can see these two protocols working together:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e'Hello'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e messageIterator = message[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]() \u003cspan class=\"hljs-comment\"\u003e// \u0026gt; StringIterator {}\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'H', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'e', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'l', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'l', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: 'o', done: false }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(messageIterator.next())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; { value: undefined, done: true }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWell, I guess it's starting to make some sense, right?\u003c/p\u003e\n\u003cp\u003eLet's go through it real quick\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWe define the string and get an instance of its iterator from it\u003c/li\u003e\n\u003cli\u003eWe start calling \u003ccode\u003enext()\u003c/code\u003e from the iterator instance (the interface that I mentioned)\u003c/li\u003e\n\u003cli\u003eEach value returned by \u003ccode\u003enext()\u003c/code\u003e is a letter from the string\u003c/li\u003e\n\u003cli\u003eIt returns letters in a left -\u0026gt; right order from the string\u003c/li\u003e\n\u003cli\u003eWhen there are no letters left, we get \u003ccode\u003eundefined\u003c/code\u003e as a value and \u003ccode\u003etrue\u003c/code\u003e as done (which means there're no more values)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you think about it, it's a very simple interface and yet it brings a lot of value to the javascript language.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='its-true-value'\u003eIts true value\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eAs I glimpsed before, we have a lot of cases which we would like to iterate over some kind of structure/object.\u003c/p\u003e\n\u003cp\u003eWe didn't really have a well defined interface for doing it, resulting in different ways to iterate over stuff.\u003c/p\u003e\n\u003cp\u003eA lot of libraries solved this problem for us, \u003ccode\u003elodash\u003c/code\u003e for example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e_.forEach(\u003cspan class=\"hljs-string\"\u003e'Hello'\u003c/span\u003e, value =\u0026gt; \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(key))\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'H' \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'e'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'l'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'l'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'o'\u003c/span\u003e\n\n_.forEach([\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e], value =\u0026gt; \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(value))\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 1 \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 2\u003c/span\u003e\n \n_.forEach({ \u003cspan class=\"hljs-string\"\u003e'a'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'b'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e }, (value, key) =\u0026gt; \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(key))\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'a' \u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'b'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see above, one single function \u003ccode\u003e.forEach(...)\u003c/code\u003e which works with any kind of object (String, Array, Object).\u003c/p\u003e\n\u003cp\u003eBut it was about time, that the language itself would improve that, so we wouldn't need a library to execute such a simple thing in a programming language.\u003c/p\u003e\n\u003cp\u003eDon't get me wrong, I love lodash and such, and they're still super useful and relevant today, they themselves can use and benefit from the iteration interfaces, and they do, imagine how simpler it is to implement their \u003ccode\u003e_.forEach\u003c/code\u003e method now than it was before.\u003c/p\u003e\n\u003cp\u003eThat's the real value, the combination of simplicity, consistency and well defined patterns.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='for-of'\u003efor..of\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eSo, how can we use these protocols in a generic way?\u003c/p\u003e\n\u003cp\u003eNow, we have \u003ccode\u003efor (let value of \u0026lt;iterable\u0026gt;) { ... }\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAs you can see, it's different than the \u003ccode\u003efor\u003c/code\u003e we're used to.\u003c/p\u003e\n\u003cp\u003eLet's check some \u003ccode\u003efor..of\u003c/code\u003e examples:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e'Hello'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e letter \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e message) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(letter)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; H\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; e\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; l\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; l\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; o\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e list = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e]\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e list) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(i)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 3\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 4\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 5\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e person = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eMap\u003c/span\u003e([[\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'jonas'\u003c/span\u003e], [\u003cspan class=\"hljs-string\"\u003e'age'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e]])\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(person)\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Map { name → \"Jonas\", age → 23 }\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e [key, value] \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e person) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${key}\u003c/span\u003e:`\u003c/span\u003e, value)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; name: Jonas\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; age: 23\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHow about \u003ccode\u003efor..in\u003c/code\u003e?\u003c/p\u003e\n\u003cp\u003eIt's still different.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003efor..in\u003c/code\u003e iteration does not use iteration protocols, it iterates over enumerable properties of objects, unless the property's name is a \u003ccode\u003eSymbol\u003c/code\u003e or defined via \u003ccode\u003eObject.defineProperty\u003c/code\u003e setting \u003ccode\u003eenumerable\u003c/code\u003e to \u003ccode\u003efalse\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThis also means it would also iterate over its prototype properties (if they fit the description above).\u003c/p\u003e\n\u003cp\u003eYou can avoid such thing by adding a conditional \u003ccode\u003eif (obj.hasOwnProperty(prop)) { ... }\u003c/code\u003e inside your \u003ccode\u003efor..in\u003c/code\u003e block, so it will execute the code only for properties of the actual instance.\u003c/p\u003e\n\u003cp\u003eHowever, you can avoid \u003ccode\u003efor..in\u003c/code\u003e if you wish, and use iteration protocols with \u003ccode\u003eObject\u003c/code\u003e instances like you would use \u003ccode\u003efor..in\u003c/code\u003e (without the necessity of the conditional though), make sure to use one of the static methods when using \u003ccode\u003efor..of\u003c/code\u003e with \u003ccode\u003eObject\u003c/code\u003e types, for example: \u003ccode\u003eObject.entries\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eI'll show how it looks like on the topic \u0026quot;Iterating over objects\u0026quot;.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='creating-a-custom-iterator'\u003eCreating a custom iterator\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eOne interesting thing to point out, is that these protocols are not stricted to be implemented only in the javascript engines, it's also possible to create a custom one.\u003c/p\u003e\n\u003cp\u003eLet's check an example?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erangeOf\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003en\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e range = {}\n\n  range[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator] = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({\n    next() {\n      \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e [value, done] = (i \u0026lt;= n ? [i++, \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e] : [\u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e])\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { value, done }\n    }\n  })\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e range\n}\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e rangeOf(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(i)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 3\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 4\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 5\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOk, once more, let's go through the code:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eA function called \u003ccode\u003erangeOf\u003c/code\u003e is defined, it should receive a integer as a parameter\u003c/li\u003e\n\u003cli\u003eInside it, we define a variable \u003ccode\u003eì\u003c/code\u003e and a \u003ccode\u003erange\u003c/code\u003e empty object\u003c/li\u003e\n\u003cli\u003eNow we assign a function to the \u003ccode\u003erange[Symbol.iterator]\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eThe function which we assign to \u003ccode\u003erange\u003c/code\u003e returns an object, which follows the iterator protocol\u003c/li\u003e\n\u003cli\u003eIts \u003ccode\u003enext\u003c/code\u003e method checks if our \u003ccode\u003ei\u003c/code\u003e variable is yet bigger than our \u003ccode\u003en\u003c/code\u003e (dynamic integer parameter) or not\u003c/li\u003e\n\u003cli\u003eIf not, we define \u003ccode\u003ei\u003c/code\u003e as value and add plus one to it, and of course done is \u003ccode\u003efalse\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eIf yes, we pass value as \u003ccode\u003eundefined\u003c/code\u003e and done as \u003ccode\u003etrue\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eIn the end of \u003ccode\u003erangeOf\u003c/code\u003e we return our iterable \u003ccode\u003erange\u003c/code\u003e object\u003c/li\u003e\n\u003cli\u003eNow, we're using \u003ccode\u003efor..of\u003c/code\u003e to iterate a brand new created iterable \u003ccode\u003erange\u003c/code\u003e object, using the value \u003ccode\u003e5\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eWe log to the console each value during the iteration\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou see, we created a brand new code following the iteration protocols and using \u003ccode\u003efor..of\u003c/code\u003e with it and it works!\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='built-in-iterables'\u003eBuilt-in iterables\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eSo, Built-in iterables, what do I mean with \u0026quot;Built-in\u0026quot; here?\u003c/p\u003e\n\u003cp\u003eIf we take a look at the language specification (\u003ca href=\"https://github.com/tc39/ecma262\"\u003eEcma262\u003c/a\u003e), we'll find a couple of clauses which mention the implementation of the \u003ccode\u003e[Symbol.iterator]\u003c/code\u003e to some \u0026quot;language entities\u0026quot;, check it out:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-map.prototype-@@iterator\"\u003eMap.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-set.prototype-@@iterator\"\u003eSet.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\"\u003eArray.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\"\u003eString.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-%iteratorprototype%-@@iterator\"\u003e%IteratorPrototype%[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-%typedarray%.prototype-@@iterator\"\u003e%TypedArray%.prototype[Symbol.iterator]\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis is what I mean with Built-in iterables, the specification is created and the javascript engines implement it.\u003c/p\u003e\n\u003cp\u003eIf you're as curious as I am about such things, I also recommend you to go take a look at the \u003ca href=\"https://github.com/tc39/test262\"\u003eTest262\u003c/a\u003e repository.\u003c/p\u003e\n\u003cp\u003eSo, now that we've seen this, let's look at some code?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eMap\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Map Iterator {  }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eSet\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Set Iterator {  }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; String Iterator {  }\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log([][\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eInt8Array\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eInt16Array\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eInt32Array\u003c/span\u003e()[\u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e.iterator]())\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; Array Iterator {  }\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, all of these objects are iterables and implement the protocols that we've been discussing so far, you don't need to define them, they're already implemented by the engines which are up to date with the specification.\u003c/p\u003e\n\u003cp\u003eBut... how about \u003ccode\u003eObject\u003c/code\u003e instances? As I mentioned earlier, if we want ot use \u003ccode\u003efor..of\u003c/code\u003e with it, we need to use one of its static methods.\u003c/p\u003e\n\u003cp\u003ePlain objects are not iterables, if we look at the \u003ccode\u003eObject.prototype[Symbol.iterator]\u003c/code\u003e we see that it's not defined.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='iterating-over-objects'\u003eIterating over objects\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eSo, let's say we want to iterate over objects using \u003ccode\u003efor..of\u003c/code\u003e, how can we do it?\u003c/p\u003e\n\u003cp\u003eLet's check some of the \u003ccode\u003eObject\u003c/code\u003e static methods in action:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e person = {\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Jonas'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e}\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e [prop, value] \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.entries(person)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${prop}\u003c/span\u003e:`\u003c/span\u003e, value)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; name: Jonas\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; age: 23\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e value \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.values(person)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(value)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 'Jonas'\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; 23\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e key \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.keys(person)) {\n  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(key)\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; name\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \u0026gt; age\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, we have the \u003ccode\u003eentries\u003c/code\u003e, \u003ccode\u003evalues\u003c/code\u003e and \u003ccode\u003ekeys\u003c/code\u003e static methods, which we call directly from the \u003ccode\u003eObject\u003c/code\u003e reference, and with that, we can iterate over an object the way it's more appropiate for us, depending on the situation.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='other-languages'\u003eOther Languages\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eI wanted to compare for curiosity how these interfaces/protocols work on other programming languages, so I decided to add this topic to the blog post, in case you're curious like me and wish to compare the specifications.\u003c/p\u003e\n\u003ch4\u003ePython\u003c/h4\u003e\n\u003cp\u003eLet's check a slice of text from the \u003ca href=\"https://docs.python.org/3/glossary.html#term-iterable\"\u003elanguage specification\u003c/a\u003e itself for these protocols.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eIterable\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAn object capable of returning its members one at a time. Examples of iterables include all sequence types (such as list, str, and tuple) and some non-sequence types like dict, file objects, and objects of any classes you define with an \u003cstrong\u003eiter\u003c/strong\u003e() method or with a \u003cstrong\u003egetitem\u003c/strong\u003e() method that implements Sequence semantics.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eIterator:\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAn object representing a stream of data. Repeated calls to the iterator’s \u003cstrong\u003enext\u003c/strong\u003e() method (or passing it to the built-in function next()) return successive items in the stream. When no more data are available a StopIteration exception is raised instead.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSounds familiar? :)\u003c/p\u003e\n\u003cp\u003eLet's recreate the same \u003ccode\u003erangeOf\u003c/code\u003e example with python?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eRangeOf\u003c/span\u003e:\u003c/span\u003e\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__init__\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(self, n)\u003c/span\u003e:\u003c/span\u003e\n        self.n = n\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__iter__\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(self)\u003c/span\u003e:\u003c/span\u003e\n        self.i = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e__next__\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(self)\u003c/span\u003e:\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e self.i \u0026lt;= self.n:\n            result = self.i\n            self.i += \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n        \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e:\n          \u003cspan class=\"hljs-keyword\"\u003eraise\u003c/span\u003e StopIteration\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e RangeOf(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e):\n    print(i)\n\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 1\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 2\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 3\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 4\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; 5\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor the record, python has an immutable sequence type called \u003ccode\u003erange\u003c/code\u003e already, I won't go into it here though.\u003c/p\u003e\n\u003ch4\u003eElixir\u003c/h4\u003e\n\u003cp\u003eIn Elixir, we've the Enumerable protocol, let's take a look and see if it's similar.\u003c/p\u003e\n\u003cp\u003eWhen you invoke a function from the \u003ccode\u003eEnum\u003c/code\u003e module (usually used to iterate over stuff) the first argument is usually a collection that must implement the enumerable protocol.\u003c/p\u003e\n\u003cp\u003eThe enumerable protocol is basically having a reduce method defined:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-elixir\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e_\u003c/span\u003e,       {\u003cspan class=\"hljs-symbol\"\u003e:halt\u003c/span\u003e, acc}, _fun),   \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:halted\u003c/span\u003e, acc}\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(list,    {\u003cspan class=\"hljs-symbol\"\u003e:suspend\u003c/span\u003e, acc}, fun), \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:suspended\u003c/span\u003e, acc, \u0026amp;reduce(list, \u0026amp;\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, fun)}\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e([],      {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, _fun),   \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:done\u003c/span\u003e, acc}\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e([h | t], {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, fun),    \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e reduce(t, fun.(h, acc), fun)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e(it uses pattern matching and recursion)\u003c/p\u003e\n\u003cp\u003eAnd we have this guy which is returned:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eacc()\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eacc() :: {:cont, term} | {:halt, term} | {:suspend, term}\nThe accumulator value for each step.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIt must be a tagged tuple with the accumulator value (\u003ccode\u003eterm\u003c/code\u003e) and with one of the following “tags”:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e:cont\u003c/code\u003e - the enumeration should continue\u003cbr\u003e\n\u003ccode\u003e:halt\u003c/code\u003e - the enumeration should halt immediately\u003cbr\u003e\n\u003ccode\u003e:suspend\u003c/code\u003e - the enumeration should be suspended immediately\u003c/p\u003e\n\u003cp\u003eSo, we kind of see a very similar thing to the \u003ccode\u003edone\u003c/code\u003e we've seen before.\u003c/p\u003e\n\u003cp\u003eLet's create something using it?\u003c/p\u003e\n\u003cp\u003eLet's say we've a \u003ccode\u003eDeveloper\u003c/code\u003e and this developer has a \u003ccode\u003ename\u003c/code\u003e and a \u003ccode\u003elanguages\u003c/code\u003e collection.\u003cbr\u003e\nI want to iterate over it using \u003ccode\u003eEnum.reduce\u003c/code\u003e which will use the Enumerable protocol, and I want to get a language on each iteration step.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-elixir\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003edefmodule\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eDeveloper\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  defstruct \u003cspan class=\"hljs-symbol\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e []\n\n  \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003edefimpl\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eEnumerable\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e_\u003c/span\u003e, {\u003cspan class=\"hljs-symbol\"\u003e:halt\u003c/span\u003e, acc}, _fun), \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:halted\u003c/span\u003e, acc}\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e languages}, {\u003cspan class=\"hljs-symbol\"\u003e:suspend\u003c/span\u003e, acc}, fun) \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n      {\u003cspan class=\"hljs-symbol\"\u003e:suspended\u003c/span\u003e, acc, \u0026amp;reduce(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e languages}, \u0026amp;\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, fun)}\n    \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e []}, {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, _fun), \u003cspan class=\"hljs-symbol\"\u003edo:\u003c/span\u003e {\u003cspan class=\"hljs-symbol\"\u003e:done\u003c/span\u003e, acc}\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ereduce\u003c/span\u003e\u003c/span\u003e(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e [head | tail]}, {\u003cspan class=\"hljs-symbol\"\u003e:cont\u003c/span\u003e, acc}, fun) \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n      reduce(%Developer{\u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e tail}, fun.(head, acc), fun)\n    \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003edefmodule\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMain\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erun\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n    developer = %Developer{\u003cspan class=\"hljs-symbol\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Charlieh'\u003c/span\u003e, \u003cspan class=\"hljs-symbol\"\u003elanguages:\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e'js'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'ruby'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'python'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'elixir'\u003c/span\u003e]}\n\n    Enum.reduce(developer, \u003cspan class=\"hljs-string\"\u003e\"\u003cspan class=\"hljs-subst\"\u003e#{developer.name}\u003c/span\u003e knows\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efn\u003c/span\u003e(skill, acc) -\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"\u003cspan class=\"hljs-subst\"\u003e#{acc}\u003c/span\u003e \u003cspan class=\"hljs-subst\"\u003e#{skill}\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e) |\u0026gt; IO.puts\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\nMain.run\n\n\u003cspan class=\"hljs-comment\"\u003e# \u0026gt; Charlieh knows js ruby python elixir\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere you go, we created our own \u003ccode\u003eDeveloper\u003c/code\u003e entity and implemented the \u003ccode\u003eEnumerable\u003c/code\u003e protocol on it.\u003c/p\u003e\n\u003cp\u003eThis example doesn't add much customization to the iteration behavior actually, but it could...\u003c/p\u003e\n\u003cp\u003eUnfortunately I'm not experienced with Elixir to show you something more interesting than this, but I guess it served the purpose well, which is the demonstration of a protocol being implemented.\u003c/p\u003e\n\u003cp\u003e\u003ch2 id='conclusion'\u003eConclusion\u003c/h2\u003e\u003c/p\u003e\n\u003cp\u003eIn this post, I hope you've got the idea and how awesome and important iteration protocols are for a language.\u003c/p\u003e\n\u003cp\u003eAnd there are many more things related to this topic that I could've added here, but I don't want this blog post to grow so long.\u003c/p\u003e\n\u003cp\u003eBut I can list a few things which I didn't mention that use these protocols in the javascript language:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePromises (\u003ccode\u003ePromise.all\u003c/code\u003e, etc)\u003c/li\u003e\n\u003cli\u003eSpread (\u003ccode\u003e[...[1, 2, 3, 4], 5, 6, 7]\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eDestructuring (\u003ccode\u003e[a, b] = [1, 2]\u003c/code\u003e, \u003ccode\u003e[first, ...rest] = [1, 2, 3, 4, 5]\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003eArray.from (\u003ccode\u003eArray.from(new Map(['name', 'jonas'], ['age', 23]))\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003emore...\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAnd we have a very nice stage 3 proposal regarding async iterators: \u003ca href=\"https://github.com/tc39/proposal-async-iteration\"\u003eAsynchronous Iterators for JavaScript\u003c/a\u003e which I'm very hyped about.\u003c/p\u003e\n\u003cp\u003eWell, I think that's it, I hope you learned reading this article as much as I did writing it.\u003c/p\u003e\n\u003cp\u003eI wish to leave a few useful links in case you want to check them out and go even further:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tc39.github.io/ecma262/#sec-common-iteration-interfaces\"\u003eEcma262 Iteration Interfaces\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tc39/test262\"\u003eTest262\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\"\u003eMDN Iteration Protocols\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://ponyfoo.com/articles/es6-iterators-in-depth\"\u003eES6 Iterators in Depth\u003c/a\u003e by \u003ca href=\"https://twitter.com/nzgb\"\u003eNicolás Bevacqua\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://2ality.com/2015/02/es6-iteration.html\"\u003eIterables and iterators in ECMAScript 6\u003c/a\u003e by \u003ca href=\"https://twitter.com/rauschma\"\u003eAxel Rauschmayer\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you have any feedback at all, feel free to comment below :)\u003c/p\u003e\n\u003cp\u003eSee ya around!\u003c/p\u003e\n","metaData":{"layout":"post","title":"The Importance of Iteration Protocols","slug":"the-importance-of-iteration-protocols","description":"Let's talk about the importance of iteration protocols, and how valuable they're to the javascript language","date":"2017-12-07 00:40:43 +0200","language":"English","excerpt":"What value iteration protocols bring, what they are, how they work and how are they different across programming languages.\n\nOn this blog post, I'll explore iteration protocols and give you lots of examples, so we can understand them easily and explore their usefulness\n","tags":["js","iterator","iterable","protocols"]},"slug":"the-importance-of-iteration-protocols","build":true},"buildId":"670cf37a-1ace-4b08-8ca9-c776f42446c5","assetPrefix":"","nextExport":true,"err":null,"chunks":["components_social_share_0a49c1be05a44c2c22400be9bd51a7a9"]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }

          false
        </script><script async="" id="__NEXT_PAGE__/post" src="/_next/670cf37a-1ace-4b08-8ca9-c776f42446c5/page/post.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/670cf37a-1ace-4b08-8ca9-c776f42446c5/page/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/_next/670cf37a-1ace-4b08-8ca9-c776f42446c5/page/_error.js"></script><script async="" src="/_next/webpack/chunks/components_social_share_0a49c1be05a44c2c22400be9bd51a7a9-73a5c323e36c6cca27c9.js"></script><script src="/_next/static/commons/main-3050c6e24db11508e52a.js" async=""></script></body></html>